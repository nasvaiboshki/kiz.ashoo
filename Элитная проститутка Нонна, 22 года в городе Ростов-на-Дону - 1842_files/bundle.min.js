/**
External lib:  **/
/*! Magnific Popup - v1.1.0 - 2016-02-20
 * http://dimsemenov.com/plugins/magnific-popup/
 * Copyright (c) 2016 Dmitry Semenov; */
function initScrollPagination() {
    var t = $(".js-paginated-list");
    t.length && (window.ias = new InfiniteAjaxScroll(t[0], {
        item: ".list-item__item",
        logger: !1,
        next: loadNext(null, t),
        spinner: {
            element: ".catalog-list__more",
            delay: 300,
            show: function (t) {
                t.style.display = "block"
            },
            hide: function (t) {
                t.style.display = "none"
            }
        }
    }))
}

function initButtonPagination() {
    var t = $(".js-paginated-list");
    t.length && document.addEventListener("click", (e => {
        let n = $(e.target);
        if (!n.hasClass("js-next-page")) return;
        let a = $(".catalog-list__more");
        a.css("display", "block"), loadNext(n, t).then((() => {
            a.css("display", "none")
        }))
    }))
}

function loadNext(t = null, e) {
    if (t || (t = $(".js-next-page.is-hidden")), t.length) {
        if ($(".js-next-page").removeClass("is-hidden"), e.hasClass("js-filtered-list")) {
            const e = new URLSearchParams(window.location.search);
            let n = Object.fromEntries(e.entries());
            const a = ["apt", "exp", "health-plus", "has-arrive", "popular", "latest", "has-video", "isFast"];
            for (let t in n) a.includes(t) ? n[t] = Number(n[t]) : n[t] = n[t].split("~");
            return n.page = t.data("next-page"), filterPersons(n, t, !0).then((function () {
                return !0
            }))
        }
        var n = {};
        return n[e.data("partial")] = "@.js-paginated-list", (e.data("filter") ? $(e.data("filter")) : $).request(e.data("action"), {
            data: {
                page: t.data("next-page")
            },
            update: n,
            success: function (n) {
                t && t.length && (t.closest("tr.load-more__container") && t.closest("tr.load-more__container").remove(), t.remove()), e.data("filter") && initTippyContent(), this.success(n)
            }
        }).then((function () {
            return !0
        }))
    }
    return !1
}

function initTippyContent() {
    window.tippy && $("[data-tippy-content]").each((function (t, e) {
        tippy(e, {
            animation: "scale",
            maxWidth: 280,
            placement: "bottom-start",
            arrow: !1,
            allowHTML: !0
        })
    }))
}

function openProfileModal(t) {
    $.magnificPopup.open({
        items: {
            src: t,
            type: "inline"
        },
        midClick: !0,
        removalDelay: 300,
        mainClass: "modal-animation",
        showCloseBtn: !1,
        preloader: !1,
        tClose: "Закрыть (Esc)",
        callbacks: {
            open: function () {
                $(".mfp-content").prepend('<button title="Закрыть (Esc)" type="button" class="mfp-close">×</button>')
            },
            beforeClose: function () {
                $(".mfp-close").remove()
            }
        }
    })
}

function initProfileListActions() {
    var t = $("#profile-items-list");
    if (t.find(".list-item__item--deleted").each((function () {
            $(this).find("a").removeAttr("href")
        })), t.length) {
        initTippyContent();
        var e = function (t, e) {
                if (t.hasClass("loading")) return !1;
                t.addClass("loading");
                var n = t.data("action");
                $.request(n || "WishList::onRemove", {
                    data: {
                        task: t.data("task"),
                        item_id: e.data("id")
                    },
                    loading: $.oc.stripeLoadIndicator,
                    success: function (t) {
                        if (t && t.status && (e.hasClass("not-hide") || e.fadeOut(500), $.magnificPopup.close()), t.status && !t.message || $.oc.flashMsg({
                                text: t.message || "Ошибка при обработке запроса!",
                                class: t.status ? "success" : "error",
                                interval: 7
                            }), t.status && !n) {
                            var a = t && t.ids && t.ids.length ? t.ids.length : "";
                            $(".js-fav-count").text(a)["" !== a ? "show" : "hide"]()
                        }
                        if (t.status && t.data && t.data.modal) {
                            var i = $(t.data.modal);
                            i.data("item", e), openProfileModal(i)
                        }
                        t.status && t.replace && e && e.replaceWith(t.replace), t.needReload && location.reload(), this.success(t)
                    },
                    complete: function () {
                        t.removeClass("loading")
                    }
                })
            },
            n = $(".js-remove-confirm").on("click", ".js-confirm-button", (function () {
                e($(this), n.data("item"))
            }));
        t.on("click", ".js-list-remove", (function (t) {
            return t.preventDefault(), n.data("item", $(this).closest(".js-list-item")), openProfileModal(n), !1
        })), t.on("click", ".js-list-action", (function (t) {
            t.preventDefault();
            var n = $(this);
            return e(n, n.closest(".js-list-item")), !1
        })), $(document).on("click", ".modal-to-slider .js-list-action", (function (t) {
            t.preventDefault();
            var n = $(this);
            if (n.hasClass("loading")) return !1;
            n.addClass("loading");
            var a = n.data("action");
            return $.request(a, {
                data: {
                    task: n.data("task"),
                    item_id: n.data("id")
                },
                loading: $.oc.stripeLoadIndicator,
                success: function (t) {
                    t.status && !t.message || $.oc.flashMsg({
                        text: t.message || "Ошибка при обработке запроса!",
                        class: t.status ? "success" : "error",
                        interval: 7
                    }), t.needReload && window.location.reload()
                },
                complete: function () {
                    n.removeClass("loading"), $.magnificPopup.close()
                }
            }), e(n, n.closest(".js-list-item")), !1
        })), $(document).on("click", ".js-magnific-popup-close", (function () {
            $.magnificPopup.close()
        }));
        var a = $("#profile-filter-status").on("change", "select", (function () {
            var e = {};
            e[t.data("partial")] = ".js-paginated-list", a.request(t.data("action"), {
                update: e,
                success: function (t) {
                    this.success(t), window.ias.resume(), initTippyContent()
                }
            })
        }))
    }
}

function initFavourites() {
    $(document).on("click", ".js-fav-btn", (function (t) {
        t.preventDefault();
        var e = $(this),
            n = e.hasClass("active"),
            a = e.data("reverse-label"),
            i = $('.js-fav-btn[data-id="' + e.data("id") + '"]')[n ? "removeClass" : "addClass"]("active");
        return $.request("WishList::on" + (n ? "Remove" : "Add"), {
            data: {
                item_id: e.data("id")
            },
            success: function (t) {
                if (!t.status) return $.oc.flashMsg({
                    text: t.message || "Ошибка при обработке запроса!",
                    class: "error",
                    interval: 7
                });
                i.each((function () {
                    var t = $(this);
                    t.data("reverse-label", t.text()), t.hasClass("js-fav-detail") && $("span", t).text(a)
                })), e.hasClass("js-in-fav") && e.closest(".item-list__cell").remove();
                var n = t && t.ids && t.ids.length ? t.ids.length : "";
                $(".js-fav-count").text(n)["" !== n ? "show" : "hide"]()
            }
        }), !1
    }))
}

function initPhoneButton() {
    $(document).on("click", ".js-show-phone", (function (t) {
        t.preventDefault();
        var e = $(this).prop("disabled", !0).addClass("loading");
        return grecaptcha.ready((function () {
            grecaptcha.execute($("#recaptcha-key").prop("content"), {
                action: "phoneShow"
            }).then((function (t) {
                var n = e.data("partial");
                n || (n = e.hasClass("js-is-salon") ? "salon" : "person"), $.request("PhoneButton::onShow", {
                    data: {
                        item_id: e.data("id"),
                        partial: n,
                        "g-recaptcha-response": t
                    },
                    success: function (t) {
                        this.success(t), !t.status && t.message && $.oc.flashMsg({
                            text: t.message,
                            class: "error",
                            interval: 7
                        }), t.status && t.data.replace && e.replaceWith($(t.data.replace).prop("class", e.prop("class")).removeClass("js-show-phone").removeClass("loading"))
                    },
                    complete: function () {
                        e.prop("disabled", !1).removeClass("loading")
                    }
                })
            }), (function (t) {
                e.prop("disabled", !1).removeClass("loading")
            }))
        })), !1
    }))
}

function initTelegramButton() {
    $(document).on("click", ".js-show-tg", (function (t) {
        t.preventDefault();
        var e = $(this).prop("disabled", !0).addClass("loading");
        return grecaptcha.ready((function () {
            grecaptcha.execute($("#recaptcha-key").prop("content"), {
                action: "telegramShow"
            }).then((function (t) {
                var n = e.data("partial");
                n || (n = e.hasClass("js-is-salon") ? "salon" : "person"), $.request("TelegramButton::onShow", {
                    data: {
                        item_id: e.data("id"),
                        partial: n,
                        "g-recaptcha-response": t
                    },
                    success: function (t) {
                        this.success(t), !t.status && t.message && $.oc.flashMsg({
                            text: t.message,
                            class: "error",
                            interval: 7
                        }), t.status && t.data.link && openMessengerModal(`https://t.me/${t.data.link}`, "Telegram")
                    },
                    complete: function () {
                        e.prop("disabled", !1).removeClass("loading")
                    }
                })
            }), (function (t) {
                e.prop("disabled", !1).removeClass("loading")
            }))
        })), !1
    }))
}

function initWhatsAppButton() {
    $(document).on("click", ".js-show-wa", (function (t) {
        t.preventDefault();
        var e = $(this).prop("disabled", !0).addClass("loading");
        return grecaptcha.ready((function () {
            grecaptcha.execute($("#recaptcha-key").prop("content"), {
                action: "whatsappShow"
            }).then((function (t) {
                var n = e.data("partial");
                n || (n = e.hasClass("js-is-salon") ? "salon" : "person"), $.request("WhatsAppButton::onShow", {
                    data: {
                        item_id: e.data("id"),
                        partial: n,
                        "g-recaptcha-response": t
                    },
                    success: function (t) {
                        this.success(t), !t.status && t.message && $.oc.flashMsg({
                            text: t.message,
                            class: "error",
                            interval: 7
                        }), t.status && t.data.link && openMessengerModal(`https://wa.me/+${t.data.link}`, "WhatsApp")
                    },
                    complete: function () {
                        e.prop("disabled", !1).removeClass("loading")
                    }
                })
            }), (function (t) {
                e.prop("disabled", !1).removeClass("loading")
            }))
        })), !1
    }))
}

function initDonateButton() {
    $(document).on("click", ".js-donate-detail", (function (t) {
        return t.preventDefault(), $.magnificPopup.open({
            items: {
                src: "#modal-wallet",
                type: "inline"
            },
            midClick: !0,
            showCloseBtn: !1,
            closeOnBgClick: !1,
            callbacks: {
                beforeOpen: function () {
                    $("body").addClass("modalWallet")
                },
                close: function () {
                    $("body").removeClass("modalWallet")
                }
            }
        }, 0), !1
    }))
}

function initPrepayButton() {
    $(document).on("click", ".js-prepay-modal", (function (t) {
        return t.preventDefault(), $.magnificPopup.open({
            items: {
                src: "#modal-prepay",
                type: "inline"
            },
            midClick: !0,
            showCloseBtn: !1,
            closeOnBgClick: !1,
            callbacks: {
                beforeOpen: function () {
                    $("body").addClass("modalPrepay")
                },
                close: function () {
                    $("body").removeClass("modalPrepay")
                }
            }
        }, 0), !1
    }))
}

function fallbackCopyTextToClipboard(t) {
    var e = $("<input>");
    $("body").append(e), e.val(t).select(), e.remove();
    try {
        document.execCommand("copy") && $.oc.flashMsg({
            text: "Скопировано",
            class: "success",
            interval: 5
        })
    } catch (t) {
        $.oc.flashMsg({
            text: "Ошибка копирования",
            class: "error",
            interval: 5
        })
    }
    e.remove()
}

function copyContent() {
    $(document).on("click", ".js-copy", (function (t) {
        t.preventDefault();
        let e = t.target,
            n = $(e).closest(".copy-container").find(".copy-field").data("copy");
        navigator.clipboard ? navigator.clipboard.writeText(n).then((function () {
            $.oc.flashMsg({
                text: "Скопировано",
                class: "success",
                interval: 5
            })
        }), (function (t) {
            fallbackCopyTextToClipboard(n)
        })) : fallbackCopyTextToClipboard(n)
    }))
}

function createElemenLink(t) {
    var e = document.createElement("a");
    e.id = t, window.document.body.appendChild(e)
}

function openMessengerModal(t, e) {
    const n = {
        color: "#1FAD36",
        image: "whatsapp.svg"
    };
    "Telegram" === e && (n.color = "#426ED1", n.image = "telegram.svg");
    let a = `\n<div class="mfp-bg modal-animation mfp-ready" id="dialogModal"></div>\n<div class="mfp-wrap mfp-align-top mfp-auto-cursor modal-animation mfp-ready" data-modal-metro tabindex="-1" style="overflow: hidden auto;">\n<div class="mfp-container mfp-s-ready mfp-inline-holder">\n\t<div class="mfp-content">\n\t    <button type="button" data-close-messenger-d class="mfp-close"><i class="icon-close-blue" aria-hidden="true"></i></button>\n\t    <div class="metro-box offcavas-metro-box messenger-dialog-box" style="color:black; width: auto; display: block; padding: 20px">\n\t    <div class="DivMetroBox" style="flex-direction: column; justify-content: flex-start; align-items: center; gap: 16px; display: inline-flex">\n\t\t  <div style="text-align: center; color: ${n.color}; font-size: 21px; font-family: Commissioner,serif; font-weight: 700; line-height: 26.25px; word-wrap: break-word">Чтобы начать диалог<br/>нажмите кнопку</div>\n\t\t  <div class="${e}" style="width: 106px; height: 106px; position: relative; text-align: center;">\n\t\t    <img src="/themes/molvo/assets/images/${n.image}" alt="${e}"/>\n\t      </div>\n\t\t</div>\n\t\t  <a href="${t}" target='_blank' id="messenger-link" style="text-align: center; padding: 20px 0 0;">\n\t\t\t  <div class="Link" style="align-self: stretch; padding: 11px 24px;background: ${n.color}; border-radius: 10px; justify-content: center; align-items: center; gap: 10px; display: inline-flex">\n\t\t\t  \t<div class="${e}" style="text-align: center; color: white; font-size: 14px; font-family: Commissioner,serif; font-weight: 400; line-height: 18px; word-wrap: break-word">Перейти в ${e} </div>\n\t\t\t  </div>\n\t\t  </a>\n\t\t</div>\n\t</div>\n</div>\n</div>`;
    const i = document.querySelector("body"),
        o = document.createElement("div");
    o.setAttribute("id", "messengers-dialog"), o.innerHTML = a, i.appendChild(o);
    let s = document.getElementById("messengers-dialog");
    document.getElementById("messenger-link").addEventListener("click", (() => {
        s.remove()
    })), s.addEventListener("click", (t => {
        t.target.closest(".messenger-dialog-box") ? t.target.closest("button[data-close-messenger-d]") && s.remove() : s.remove()
    }))
}

function initPagerMore() {
    $(".js-pager-more").length && $(document).on("click", ".js-pager-more", (function (t) {
        if (t.preventDefault(), $(this).hasClass("is-loading")) return !1;
        var e = $(this).addClass("is-loading"),
            n = e.data("partial"),
            a = e.data("action"),
            i = e.data("replace"),
            o = e.data("post") || {},
            s = e.data("page") || 1,
            r = e.data("pages") || 1,
            l = {};
        return l[n] = "@" + e.data("target"), o.page = s + 1, $.request(a, {
            data: o,
            update: l,
            success: function (t) {
                e.removeClass("is-loading").data("page", s + 1)[s + 1 >= r ? "hide" : "show"](), i && e.remove(), this.success(t)
            },
            error: function (t) {
                $.oc.flashMsg({
                    text: t,
                    class: "error",
                    interval: 3
                })
            },
            complete: function () {
                e.removeClass("is-loading")
            }
        }), !1
    }))
}

function filterPersons(t, e, n, a) {
    const i = $("#filter");
    if (!n && !e && $(".js-filter-apply", i).is(":visible")) return;
    const o = $.trim($("#search-q").val());
    return o.length && ((t = t || {}).q = o), i.request("FilterPage::onUpdate", {
        url: i.prop("action"),
        data: t,
        success: function (t) {
            if (e && e.length) e.closest("tr.load-more__container") && e.closest("tr.load-more__container").remove(), e.remove();
            else if (a && window.ias.resume(), t.data && t.data.url && window.history) {
                const e = window.history.state;
                let n = "",
                    a = "";
                t.data.city_geo ? (n = t.data.city_geo.meta_header, a = t.data.city_geo.meta_title) : (n = t.data.meta_header, a = t.data.meta_title), t.data.meta_desc && $("meta[name=description]").attr("content", t.data.meta_desc), $(".js-page-header").html(n), document.title = a, $(".filter-count > span").text(t.data.count), $(".filter-count .counter").text(t.data.count), $("#pathway").html(t.data.pathway), rerenderPagination(t.data), window.history.replaceState(e, a, t.data.url)
            }
            this.success(t)
        }
    })
}

function initFilter() {
    const t = $("#filter");
    if (!t.length) return;
    const e = $(".js-filtered-list").on("next", (function (t, e) {
        return filterPersons({
            page: e.next.data("next-page")
        }, e.next, !0)
    }));
    $("#search-q").on("change", (function () {
        filterPersons({}, null, !1, e[0])
    }));
    t.on("submit", (function (t) {
        return t.preventDefault(), filterPersons({}, null, !0, e[0]), !1
    }));
    $(".js-filter-apply", t).on("click", (function () {
        filterPersons({}, null, !0, e[0])
    }));
    t.on("change", "input", (function (n) {
        if ("metro[]" === this.name || "dist[]" === this.name) {
            const e = "metro[]" === this.name ? "dist[]" : "metro[]";
            $('[name="' + e + '"]', t).prop("checked", !1).closest(".catalog-filter__cell").find("b").text(t.data("all"))
        } else "exp" === this.name && $('[name="exp"]', t).prop("checked", this.checked);
        filterPersons({}, null, !1, e[0]);
        const a = $(this);
        if (a.is(":checkbox")) {
            const e = a.closest(".catalog-filter__cell"),
                n = $(":checked", e).length;
            e.find("b").text(n || t.data("all"))
        }
    })).on("change", "select", (function (t) {
        filterPersons({}, null, !1, e[0])
    }));
    let n = $('[data-sliderui="range"]', t);
    n.length > 0 && !window.sliderInit && initSlider(), $(document).on("click", (a => {
        let i = a.target,
            o = i.closest(".catalog-filter__trigger");
        (i.classList.contains("catalog-filter__trigger") || o) && (a.preventDefault(), o && (i = o), function (t) {
            let e = $(".catalog-filter__trigger"),
                n = $(".catalog-filter__dropdown"),
                a = $(t),
                i = a.parent().find(".catalog-filter__dropdown");
            $(t).hasClass("is-active") ? panelRemover(e, n) : (panelRemover(e, n), panelOpen(a, i))
        }(i)), i.classList.contains("catalog-filter__back") && (a.preventDefault(), function () {
            let t = $(".catalog-filter__trigger"),
                e = $(".catalog-filter__dropdown");
            panelRemover(t, e)
        }()), (i.classList.contains("catalog-filter__mobile") || i.closest(".catalog-filter__mobile")) && (a.preventDefault(), function (e) {
            panelOpen($(e), t)
        }(i)), (i.classList.contains("catalog-filter__button") || i.closest(".catalog-filter__button")) && (a.preventDefault(), function (e) {
            panelRemover($(e), t)
        }(i)), (i.classList.contains("catalog-filter__reset") || i.closest(".catalog-filter__reset")) && (a.preventDefault(), function () {
            let a = $(".catalog-filter__trigger"),
                i = $(".catalog-filter__dropdown");
            panelRemover(a, i),
                function () {
                    t.find("input:checked").removeAttr("checked").prop("checked", !1), t.find(".catalog-filter__cell").find("b").text(t.data("all")), n.length || (n = $('[data-sliderui="range"]', t));
                    n.each((function (t, e) {
                        const a = +$(this).data("min"),
                            i = +$(this).data("max");
                        n[t].noUiSlider.set([a, i])
                    })), filterPersons({}, null, !1, e[0])
                }()
        }()), i.classList.contains("catalog-filter__reset-group") && (a.preventDefault(), function (n) {
            (function (n) {
                const a = $(n).closest(".catalog-filter__row").find("input:checked"),
                    i = $(n).closest(".catalog-filter__cell").find(".catalog-filter__trigger > span > b");
                a.removeAttr("checked").prop("checked", !1), +i.text() === a.length ? i.text(t.data("all")) : i.text(+i.text() - a.length);
                filterPersons({}, null, !1, e[0])
            })(n)
        }(i)), (i.classList.contains("catalog-filter__anchor_link") || i.closest(".catalog-filter__anchor_link")) && a.preventDefault()
    })), dropdownSearch($("#metroFilter"), t), dropdownSearch($("#distrFilter"), t)
}

function initSlider() {
    let t = $("#filter"),
        e = $(".js-filtered-list").on("next", (function (t, e) {
            return filterPersons({
                page: e.next.data("next-page")
            }, e.next, !0)
        }));
    window.sliderInit = !0;
    let n = $('[data-sliderui="range"]', t);
    n.each((function (t, a) {
        const i = $(this).closest('[data-sliderui="slider"]'),
            o = i.find('[data-sliderui="from-text"]'),
            s = i.find('[data-sliderui="to-text"]'),
            r = i.find('[data-sliderui="from"]'),
            l = i.find('[data-sliderui="to"]'),
            c = +$(this).data("min"),
            d = +$(this).data("max"),
            u = +$(this).data("start"),
            p = +$(this).data("end"),
            f = isNaN(c) || isNaN(d) ? {
                min: 0,
                max: 100
            } : {
                min: c,
                max: d
            },
            m = {
                start: isNaN(u) || isNaN(p) ? [c, d] : [u, p],
                connect: !0,
                step: p > 1e3 ? 1e3 : 1,
                range: f,
                format: wNumb({
                    decimals: 0
                })
            },
            h = noUiSlider.create(n[t], m);
        h.on("update", (function (t) {
            const e = t[0],
                n = t[1];
            o.html(e), s.html(n), r.val(e), l.val(n)
        })), h.on("change", (function () {
            filterPersons({}, null, !1, e[0])
        }))
    }))
}

function initMegaFilter(t) {
    const e = $(t);
    if (!e.length) return;
    const n = {
            category: "type",
            tag: "tag",
            feature: "pref",
            city: "city",
            district: "dist",
            metro: "metro",
            "has-apartment": "apt",
            "has-express": "exp",
            arrive: "arrive",
            age: "age",
            high: "high",
            cost: "price",
            weight: "weight",
            chest: "chest",
            pub: "pub",
            "body-art": "art",
            "hair-color": "hair",
            nacionalnost: "nacionalnost",
            look: "look",
            "health-plus": "health-plus",
            "health-check": "health-check",
            "has-arrival": "has-arrive",
            "cost-1h-apart": "cost-1h-apart",
            "cost-2h-apart": "cost-2h-apart",
            "cost-night-apart": "cost-night-apart",
            "cost-1h-arrival": "cost-1h-arrive",
            "cost-2h-arrival": "cost-2h-arrive",
            "cost-night-arrival": "cost-night-arrive",
            popular: "popular",
            latest: "latest",
            shoes: "shoes",
            clothes: "clothes",
            english: "english",
            id: "id",
            phone: "phone",
            body_shape: "body_shape"
        },
        a = {
            age: [18, 70],
            high: [120, 220],
            weight: [35, 120],
            chest: [1, 12],
            cost: [3e3, 2e5],
            "cost-1h-apart": [3e3, 2e5],
            "cost-2h-apart": [5e3, 4e5],
            "cost-night-apart": [5e3, 8e5],
            "cost-1h-arrival": [3e3, 2e5],
            "cost-2h-arrival": [5e3, 4e5],
            "cost-night-arrival": [5e3, 8e5],
            shoes: [35, 46],
            clothes: [35, 70]
        };

    function i(t, e, n) {
        return n.indexOf(t) === e
    }
    $('input[name="q-phone"]').inputmask("+7 (999) 999-99-99"), e.on("submit", (function (t) {
        t.preventDefault();
        const e = new FormData(t.target),
            o = Object.fromEntries(e);
        let s = {};
        Object.keys(o).map((t => {
            if (t.includes("[]")) {
                const o = t.substring(0, t.length - 2);
                s[n[o]] = e.getAll(t), s[n[o]] = s[n[o]].filter(i), a[o] && s[n[o]][0] == a[o][0] && s[n[o]][1] == a[o][1] && (s[n[o]] = ""), "" === s[n[o]] && delete s[n[o]]
            } else "" !== o[t] && "id" !== t && "q-phone" !== t && (s[n[t]] = o[t]);
            if (["id", "q-phone"].includes(t) && o[t]) {
                s = [];
                let e = o[t].match(/\d+/g).join("");
                return t.includes("q-phone") && (t = "phone"), s[t] = e, s.city = o.city, !1
            }
        }));
        const r = Object.keys(s).map((t => "object" == typeof s[t] ? `${t}=${s[t].join("~")}` : `${t}=${s[t]}`)).join("&");
        return "" === r ? (window.alert("Под эти характеристики подходят все девушки. Выберите пожалуйста параметры фильтрации."), !1) : (window.location.href = `/search?${r}`, !1)
    })), e.on("keyup", "input", (function (t) {
        if (["id", "q-phone"].includes(this.name)) {
            let t = this.value;
            $(`input[name="${this.name}"]`).each(((e, n) => {
                n !== this && $(n).val(t)
            }))
        }
    })), e.on("change", "input", (function (t) {
        if ("metro[]" === this.name || "dist[]" === this.name) {
            const t = "metro[]" === this.name ? "dist[]" : "metro[]";
            $('[name="' + t + '"]', e).prop("checked", !1).closest(".catalog-filter__cell").find("b").text(e.data("all"))
        }
        "exp" === this.name && $('[name="exp"]', e).prop("checked", this.checked);
        const n = $(this);
        if (n.is(":checkbox")) {
            const t = n.closest(".catalog-filter__cell"),
                a = t.data("type"),
                i = $(`.catalog-filter__cell[data-type="${a}"]`),
                o = $(":checked", t).length;
            i.each(((t, n) => {
                $(n).find("b").text(o || e.data("all"))
            })), $(`input[name="${n.prop("name")}"][value="${n.val()}"]`).each(((t, e) => {
                $(e).prop("checked", n.prop("checked"))
            }))
        }
        if ("number" === n.prop("type")) {
            let t = n.prop("name");
            t.includes("[]") && (t = t.substring(0, t.length - 2));
            let e = n.closest('[data-sliderui="slider"]'),
                a = e.find('[data-sliderui="from"]'),
                i = e.find('[data-sliderui="to"]');
            f.each(((e, n) => {
                $(n).data("type") == t && f[e].noUiSlider.set([a.val(), i.val()])
            }))
        }
    })).on("change", "select", (function (t) {}));
    const o = $(".catalog-filter__trigger", e),
        s = $(".catalog-filter__back", e),
        r = $(".js-reset-mega", e),
        l = $(".catalog-filter__reset-group", e),
        c = $(".catalog-filter__mobile", e),
        d = $(".catalog-filter__dropdown", e),
        u = $(".catalog-filter__button", e),
        p = $(".catalog-filter__anchor_link", e);
    let f = $('[data-sliderui="range"]', e);
    f.each((function (t, e) {
        const n = $(this).closest('[data-sliderui="slider"]'),
            a = n.find('[data-sliderui="from-text"]'),
            i = n.find('[data-sliderui="to-text"]'),
            o = n.find('[data-sliderui="from"]'),
            s = n.find('[data-sliderui="to"]'),
            r = +$(this).data("min"),
            l = +$(this).data("max"),
            c = +$(this).data("start"),
            d = +$(this).data("end"),
            u = isNaN(r) || isNaN(l) ? {
                min: 0,
                max: 100
            } : {
                min: r,
                max: l
            },
            p = {
                start: isNaN(c) || isNaN(d) ? [r, l] : [c, d],
                connect: !0,
                step: d > 1e3 ? 1e3 : 1,
                range: u,
                format: wNumb({
                    decimals: 0
                })
            };
        let m = null;
        try {
            m = noUiSlider.create(f[t], p)
        } catch (e) {
            f[t].noUiSlider.destroy(), m = noUiSlider.create(f[t], p)
        }
        m.on("update", (function (t) {
            const e = t[0],
                n = t[1];
            a.html(e), i.html(n), o.val(e), s.val(n)
        })), m.on("change", (function (t) {
            const e = t[0],
                n = t[1];
            let a = $(this.target).closest('[data-sliderui="range"]').data("type");
            f.each(((t, i) => {
                $(i).data("type") == a && f[t].noUiSlider.set([e, n])
            }))
        }))
    })), p.on("click", (function (t) {
        t.preventDefault()
    })), o.on("click", (function (t) {
        t.preventDefault();
        const e = $(this),
            n = e.parent().find(".catalog-filter__dropdown");
        return $(this).hasClass("is-active") ? (panelRemover(o, d), !1) : (panelRemover(o, d), panelOpen(e, n), !1)
    })), s.on("click", (function (t) {
        return t.preventDefault(), panelRemover(o, d), !1
    })), c.on("click", (function (t) {
        return t.preventDefault(), panelOpen($(this), e), !1
    })), u.on("click", (function (t) {
        panelRemover($(this), e)
    })), r.on("click", (function (t) {
        return t.preventDefault(), panelRemover(o, d), e.find("input:checked").removeAttr("checked").prop("checked", !1), e.find(".catalog-filter__cell").find("b").text(e.data("all")), f.each((function (t, e) {
            const n = +$(this).data("min"),
                a = +$(this).data("max");
            f[t].noUiSlider.set([n, a])
        })), $.request("FilterPage::onClearFilters", {}), $('input[name="id"]').prop("value", ""), $('input[name="q-phone"]').prop("value", ""), !1
    })), l.on("click", (function (t) {
        return t.preventDefault(),
            function (t) {
                const n = $(t).closest(".catalog-filter__row").find("input:checked"),
                    a = $(t).closest(".catalog-filter__cell").find(".catalog-filter__trigger > span > b");
                n.removeAttr("checked").prop("checked", !1), +a.text() === n.length ? a.text(e.data("all")) : a.text(+a.text() - n.length)
            }(t.target), !1
    })), $(".metro_filter").each(((t, n) => dropdownSearch($(n), e))), $(".distr_filter").each(((t, n) => dropdownSearch($(n), e)))
}

function dropdownSearch(t, e) {
    if (!t.length) return;
    const n = e.find(".catalog-filter__ul > li");

    function a() {
        const t = $(this).val().toLowerCase();
        n.filter((function () {
            $(this).toggle($(this).text().toLowerCase().indexOf(t) > -1)
        }))
    }
    t.on("keyup", a), t.on("search", a)
}

function initAccordion() {
    function t(t) {
        if (t.target.closest(".accordion-box__content")) return;
        t.preventDefault();
        let e = t.target.closest(".accordion-box"),
            n = t.target.nextElementSibling;
        n || (n = e.querySelector(".accordion-box__label").nextElementSibling), e.classList.toggle("active"), e.classList.contains("active") ? n.style.maxHeight = n.scrollHeight + "px" : n.style.maxHeight = 0
    }
    Array.from(document.querySelectorAll(".accordion-box")).forEach((e => {
        e.addEventListener("click", t)
    }))
}

function initLogin() {
    const t = $("#modalLoginCode");
    if (t.length) {
        var e = $("#js-reg-rules");
        e.data("public-url", e.prop("href")), $(".js-resend-code").on("click", (function (t) {
            t.preventDefault();
            const e = $(this).closest("form");
            return $(":submit", e).hasClass("loading") || e.trigger("resend"), !1
        })), $(".js-login-form").on("submit resend", (function (e) {
            e.preventDefault();
            const n = $(this),
                a = n.data("action"),
                i = $(":submit", n).prop("disabled", !0).addClass("loading"),
                o = n.data("mode");
            return grecaptcha.ready((function () {
                var s = n.find('[name="g-recaptcha-response"]');
                grecaptcha.execute($("#recaptcha-key").prop("content"), {
                    action: "authSubmit"
                }).then((function (r) {
                    s.val(r), n.request("Auth::" + ("resend" === e.type ? "onLogin" : a), {
                        loading: $.oc.stripeLoadIndicator,
                        redirect: !0,
                        success: function (e) {
                            this.success(e), (e.message || !e.status && void 0 !== e.status) && ($.oc.flashMsg({
                                text: e.message || "Ошибка при обработке запроса!",
                                class: e.status ? "success" : "error",
                                interval: 7
                            }), "login" === o && e.status && (window.location.href = "/")), e.status && ("onConfirm" !== a && "email" === o && ($(".modal-login__item").removeClass("active"), t.addClass("active"), t.find('input[name="email"]').val(e.data.email), t.find(".js-code-email").text(e.data.email)), "onRegister" === a && window.fbq && fbq("track", "CompleteRegistration"))
                        },
                        complete: function () {
                            i.prop("disabled", !1).removeClass("loading")
                        }
                    })
                }), (function (t) {
                    i.prop("disabled", !1).removeClass("loading")
                }))
            })), !1
        })).on("change", '[name="is_partner"]', (function () {
            e.prop("href", e.data(this.value > 0 ? "partner-url" : "public-url"))
        }))
    }
}

function initReviewForm() {
    var t = $("#review-form");
    if (t.length) {
        t.on("submit", (function (n) {
            n.preventDefault();
            var a = $(":submit", t).prop("disabled", !0).addClass("loading");
            return grecaptcha.ready((function () {
                var n = t.find('[name="g-recaptcha-response"]');
                grecaptcha.execute($("#recaptcha-key").prop("content"), {
                    action: "reviewSubmit"
                }).then((function (i) {
                    n.val(i), t.request(t.data("action"), {
                        loading: $.oc.stripeLoadIndicator,
                        success: function (n) {
                            this.success(n), $.oc.flashMsg({
                                text: n.message || "Ошибка при обработке запроса!",
                                class: n.status ? "success" : "error",
                                interval: 7
                            }), n.status && n.data.removeForm && t.remove(), n.status && n.data.id && n.data.replace && (t.removeClass("is-active"), e.find('.js-review-item[data-id="' + n.data.id + '"]').replaceWith(n.data.replace))
                        },
                        complete: function () {
                            a.prop("disabled", !1).removeClass("loading")
                        }
                    })
                }), (function (t) {
                    a.prop("disabled", !1).removeClass("loading")
                }))
            })), !1
        }));
        var e = $("#review-list");
        e.on("click", ".js-answer-form-toggle", (function (n) {
            n.preventDefault();
            var a = $(this);
            if (a.hasClass("is-active")) t.removeClass("is-active"), a.removeClass("is-active");
            else {
                e.find(".js-answer-form-toggle").removeClass("is-active");
                var i = a.addClass("is-active").closest(".js-review-item");
                i.after(t), t.addClass("is-active").find('[name="id"]').val(i.data("id")), t.find("textarea").focus()
            }
            return !1
        }))
    }
}

function initAbuseForm() {
    var t = $("#abuse-form");
    t.length && t.on("submit", (function (e) {
        e.preventDefault();
        var n = $(":submit", t).prop("disabled", !0).addClass("loading");
        return grecaptcha.ready((function () {
            var e = t.find('[name="g-recaptcha-response"]');
            grecaptcha.execute($("#recaptcha-key").prop("content"), {
                action: "abuseSubmit"
            }).then((function (a) {
                e.val(a), t.request("AbuseForm::onSubmit", {
                    loading: $.oc.stripeLoadIndicator,
                    success: function (t) {
                        this.success(t), $.oc.flashMsg({
                            text: t.message || "Ошибка при обработке запроса!",
                            class: t.status ? "success" : "error",
                            interval: 7
                        }), t.status && t.data.removeButton && ($(".js-abuse-button").remove(), $.magnificPopup.close())
                    },
                    complete: function () {
                        n.prop("disabled", !1).removeClass("loading")
                    }
                })
            }), (function (t) {
                n.prop("disabled", !1).removeClass("loading")
            }))
        })), !1
    }))
}

function initInputMask(t, e) {
    const n = t.inputmask("+7 999 999-99-99");
    t.data("mask", n)
}

function initAddForm() {
    const t = $(".js-add-form");
    if (!t.length) return;
    const e = $(".js-phone-intl", t).each((function () {
        const t = $(this),
            e = $("#" + t.prop("id") + "_iso");
        initInputMask(t, e)
    }));
    t.on("submit", (function (n) {
        n.preventDefault();
        for (let t = 0; t < e.length; t++) {
            const n = $(e[t]);
            if ((n.prop("required") || "" !== n.val()) && (!n.data("mask").inputmask("isComplete") || !n.data("mask").inputmask("hasMaskedValue"))) {
                let t = "Указан некорректный номер телефона!";
                return t = n.data("label") + ": " + t.toLowerCase(), $.oc.flashMsg({
                    text: t,
                    class: "error"
                })
            }
        }
        var a = $(":submit", t);
        return a[0].disabled = !0, grecaptcha.ready((function () {
            var e = t.find('[name="g-recaptcha-response"]');
            grecaptcha.execute($("#recaptcha-key").prop("content"), {
                action: "authSubmit"
            }).then((function (n) {
                e.val(n), t.request(t.data("action"), {
                    loading: $.oc.stripeLoadIndicator,
                    success: function (t) {
                        $.oc.flashMsg({
                            text: t.message || "Ошибка при обработке запроса!",
                            class: t.status ? "success" : "error",
                            interval: 7
                        }), t.data && t.data.redirect && (window.location.href = t.data.redirect), this.success(t)
                    },
                    complete: function () {
                        a[0].disabled = !1
                    }
                })
            }), (function (t) {
                a[0].disabled = !1
            }))
        })), !1
    })), initFormCitySelect(), "personForm" !== t.prop("id") ? initSalonForm() : initPersonForm()
}

function initSalonForm() {
    var t = $('[name="add_form_person"]').on("change", (function () {
        this.value && ($.request("SalonForm::onAjaxRequest", {
            data: {
                set_person_ids: [this.value]
            },
            update: {
                "salon-form/persons-list": "@.js-salon-persons"
            },
            loading: $.oc.stripeLoadIndicator,
            success: function (t) {
                this.success(t)
            }
        }), t.find('option[value="' + this.value + '"]').prop("disabled", !0).prop("selected", !1), t.select2())
    }));
    $(".js-salon-persons").on("click", ".js-salon-person-remove", (function () {
        var e = $(this).closest(".form-grils");
        t.find('option[value="' + $(this).data("id") + '"]').prop("disabled", !1), t.select2(), e.remove()
    }))
}

function initPersonForm() {
    $(".js-person-options").on("change", ":checkbox", (function () {
        var t = $(this).closest(".form-profile-checkgroup__item").find(".form-profile-checkgroup__textarea");
        t[this.checked ? "show" : "hide"]();
        var e = $(this);
        t.find("textarea").prop("name", this.checked ? e.hasClass("js-is-exclusive") ? e.data("txt-name") : this.name : "")
    }));
    var t = $(".js-exclusive-notes").on("change", "textarea", (function () {
        var e = $(this),
            n = t.find("textarea").length;
        if (!(e.parent().next().length || !$.trim(e.val()).length || n >= 3)) {
            var a = e.parent().clone();
            a.find("textarea").val(""), e.closest(".js-exclusive-notes").append(a)
        }
    }));
    $("#js_form_tags").select2({
        width: "resolve",
        allowClear: !1
    }).on("select2:unselecting", (function (t) {
        $(t.params.args.data.element).attr("locked") && t.preventDefault()
    })), $("#js_form_girlfriends").select2({
        placeholder: "Введите ID анкеты",
        width: "resolve",
        allowClear: !1,
        minimumInputLength: 1,
        matcher: function (t, e) {
            if ("" === $.trim(t.term)) return e;
            if (void 0 === e.id) return null;
            if (e.id.indexOf(t.term) > -1) {
                var n = $.extend({}, e, !0);
                return n.id += " (matched)", n
            }
            return null
        },
        templateResult: function (t) {
            if (!t.id) return t.text;
            return $('<div class="girl-item"><span class="girl-img" style="background: url(' + t.photo + ') 50%;"></span> <span class="girl-name">' + t.name + '</span> <span class="girl-age">' + t.age + "</span></div>")
        },
        ajax: {
            method: "GET",
            url: "/api/v1/girls",
            dataType: "json",
            delay: 1e3,
            data: function (t) {
                return {
                    id: t.term
                }
            },
            processResults: function (t) {
                return {
                    results: t.data.map((t => ({
                        ...t,
                        text: t.name
                    })))
                }
            }
        }
    });
    var e = $(".js-person-location-map");
    $("#form_salon_id").on("change", (function () {
        e[this.value ? "hide" : "show"]()
    }));
    var n = $(".js-foreigners-lang").on("click", ".js-foreigner-remove", (function () {
            var t = $(this).closest(".form-profile-lang__row"),
                e = t.find('[name="foreigners[lang][]"]').val();
            i.find('option[value="' + e + '"]').prop("disabled", !1), i.select2(), t.remove(), $("#personForm").request("onSaveToSession")
        })),
        a = n.find(".js-sample-foreigner"),
        i = n.find('[name="add_form_lang"]').on("change", (function () {
            if (this.value) {
                var t = i.find('option[value="' + this.value + '"]'),
                    e = a.clone().insertBefore(a).removeClass("js-sample-foreigner").show();
                e.find(".js-foreigner-lang").text(t.text()), e.find('[name="foreigners[lang][]"]').val(this.value), e.find('select[name="foreigners[level_feature_id][]"]').select2({
                    width: "resolve"
                }), t.prop("disabled", !0).prop("selected", !1), i.select2()
            }
        })),
        o = $(".js-price-hint");
    $("#form_category_id").on("change", (function () {
        let t = "text-default";
        2 === parseInt(this.value) ? t = "text-elite" : 6 === parseInt(this.value) && (t = "text-premium"), o.text(o.data(t))
    }));
    let s = initDescriptionField();
    $("#personForm").on("submit", (function (t) {
        $("#descriptionLength").val(s.getText().length), $("#hiddenDescription").val(JSON.stringify(s.getContents()))
    }))
}

function initFormCitySelect() {
    var t = $(".js-form-city-children").on("change", ":checkbox", (function () {
            this.checked && t.find("input:checked").length > 3 && $(this).prop("checked", !1).removeAttr("checked")
        })),
        e = $("#person-address-map");
    $("#form_city").select2({
        ajax: {
            method: "POST",
            url: "/api/v1/cities/search"
        },
        minimumInputLength: 2,
        width: "resolve"
    }).on("change", (function () {
        t.empty(), this.value && $.request($(this).data("action"), {
            data: {
                city_id: this.value
            },
            loading: $.oc.stripeLoadIndicator,
            success: function (n) {
                this.success(n), t.find(".js-select").select2({
                    width: "resolve"
                });
                var a = $("#city_default_lat");
                if (e.length && "" !== a.val()) return $(e.data("input-latitude")).val(a.val()), $(e.data("input-longitude")).val($("#city_default_lng").val()), e.trigger("map-update"), $("#personForm").request("onSaveToSession"), !1
            }
        })
    }))
}

function initQuickSearch() {
    var t = null;
    autocomplete({
        minLength: 3,
        debounceWaitMs: 135,
        disableAutoSelect: !0,
        emptyMsg: function () {
            return t
        },
        input: document.getElementById("search-q"),
        fetch: function (e, n) {
            console.log(e), $.request("Location::onSearchSuggest", {
                loading: $.oc.stripeLoadIndicator,
                data: {
                    q: e
                },
                success: function (e) {
                    t = e.message, n(e.data)
                }
            })
        },
        onSelect: function (t) {
            window.location.href = t.value
        }
    })
}

function initProfileForm() {
    const t = $("#profile-edit");
    if (t.length) {
        t.on("submit", (function (e) {
            e.preventDefault();
            var n = $(":submit", t).prop("disabled", !0).addClass("loading");
            t.request("Profile::onUpdate", {
                loading: $.oc.stripeLoadIndicator,
                success: function (t) {
                    this.success(t), $.oc.flashMsg({
                        text: t.message || "Ошибка при обработке запроса!",
                        class: t.status ? "success" : "error",
                        interval: 7
                    })
                },
                complete: function () {
                    n.prop("disabled", !1).removeClass("loading")
                }
            })
        }));
        var e = $("#profile_avatar").on("change", (function (e) {
            return e.preventDefault(), t.request("Profile::onUploadAvatar", {
                loading: $.oc.stripeLoadIndicator,
                success: function (t) {
                    t.data && t.data.url && $(".js-profile-avatar").html($("<img/>", {
                        src: t.data.url
                    })), $.oc.flashMsg({
                        text: t.message || "Ошибка при обработке запроса!",
                        class: t.status ? "success" : "error"
                    }), this.success(t)
                },
                files: !0
            }), !1
        }));
        t.on("click", ".js-profile-avatar-change", (function (t) {
            return t.preventDefault(), e.trigger("click"), !1
        }));
        var n = $("#credit_card_image").on("change", (function (e) {
            return e.preventDefault(), t.request("Profile::onUploadCreditCardImage", {
                loading: $.oc.stripeLoadIndicator,
                success: function (t) {
                    t.data && t.data.url && $(".js-profile-credit-image-change").html($("<img/>", {
                        src: t.data.url
                    })), $.oc.flashMsg({
                        text: t.message || "Ошибка при обработке запроса!",
                        class: t.status ? "success" : "error"
                    }), this.success(t), location.reload()
                },
                files: !0
            }), !1
        }));
        t.on("click", ".js-profile-credit-image-change", (function (t) {
            return t.preventDefault(), n.trigger("click"), !1
        })), $("#profile_city").select2({
            ajax: {
                method: "POST",
                url: "/api/v1/cities/search"
            },
            minimumInputLength: 2,
            width: "resolve"
        }), $(".js-social-remove").on("click", (function (t) {
            t.preventDefault(), $.request("Profile::onSocialRemove", {
                loading: $.oc.stripeLoadIndicator,
                data: {
                    social_id: $(this).data("social-id")
                },
                success() {
                    window.location.reload()
                }
            })
        }))
    }
}

function initContactForm() {
    var t = $("#contact-form");
    if (t.length) {
        var e = $(":submit", t),
            n = $('[data-control="fileupload"]', t),
            a = n.data("dropzone");
        t.on("submit", (function (i) {
            return i.preventDefault(), e.prop("disabled", !0).addClass("loading"), grecaptcha.ready((function () {
                var i = t.find('[name="g-recaptcha-response"]');
                grecaptcha.execute($("#recaptcha-key").prop("content"), {
                    action: "contactSubmit"
                }).then((function (o) {
                    if (i.val(o), a.files.length) return a.processQueue();
                    t.request("ContactForm::onSubmit", {
                        loading: $.oc.stripeLoadIndicator,
                        success: function (e) {
                            this.success(e), a.removeAllFiles(), n.removeClass("is-populated"), $.oc.flashMsg({
                                text: e.message || "Ошибка при обработке запроса!",
                                class: e.status ? "success" : "error"
                            }), e.status && t[0].reset()
                        },
                        complete: function () {
                            e.prop("disabled", !1).removeClass("loading")
                        }
                    })
                }), (function (t) {
                    e.prop("disabled", !1).removeClass("loading")
                }))
            })), !1
        })), a.on("success", (function (e, i) {
            a.removeAllFiles(), n.removeClass("is-populated"), $.oc.flashMsg({
                text: i.message || "Ошибка при обработке запроса!",
                class: i.status ? "success" : "error"
            }), i.status && t[0].reset()
        })), a.on("complete", (function () {
            e.prop("disabled", !1).removeClass("loading")
        }))
    }
}

function initDescriptionField() {
    if (!$("#description").length) return null;
    return new Quill("#description", {
        modules: {
            toolbar: [
                ["bold", "italic", "underline", "strike", "link"]
            ]
        },
        placeholder: "Напишите полное описание",
        theme: "bubble",
        formats: ["bold", "color", "font", "code", "italic", "link", "size", "strike", "script", "underline", "blockquote", "header", "indent", "list", "align", "direction", "code-block", "formula"]
    })
}

function initDoctorSearchForm() {
    async function t(t, e, n) {
        return new Promise(((a, i) => {
            $.request("DoctorSearch::onSearchPersons", {
                data: {
                    person_id: t.data.q
                },
                success: function (t) {
                    e(t), a()
                },
                error: function (t) {
                    n(t), i()
                }
            })
        }))
    }
    let e = null;
    $(".js-person-select").select2({
        ajax: {
            method: "POST",
            delay: 500,
            transport: function (n, a, i) {
                if (e) {
                    let o = e.then((function () {
                        return t(n, a, i)
                    }));
                    e = o
                } else e = t(n, a, i)
            }
        },
        allowClear: !1,
        templateResult: function (t) {
            if (t.loading) return t.name;
            return $('<a href="/personal/doctor/' + t.id + '" class="girl-item" style="height: 100px"><img style="height:auto" class="girl-img" src="' + t.avatar + '"><span class="girl-name">' + t.name + '</span><span class="girl-id">' + t.id + "</span></a>")
        },
        templateSelection: function (t) {
            return t.id || t.text
        },
        width: "resolve",
        minimumInputLength: 1
    }).on("change", (function () {
        window.location.href = `/personal/doctor/${this.value}`
    }))
}

function initStartChat() {
    var t = $("#start-chat");
    t.length && t.on("click", (function (e) {
        e.preventDefault(), t.prop("disabled", !0).addClass("loading"), $.request("StartChat::onSubmit", {
            loading: $.oc.stripeLoadIndicator,
            data: {
                person_id: t.data("pid")
            },
            success: function (t) {
                this.success(t), t.status || $.oc.flashMsg({
                    text: t.message || "Ошибка при обработке запроса!",
                    class: "error",
                    interval: 7
                }), t.data && t.data.redirect && (window.location.href = t.data.redirect)
            },
            complete: function () {
                t.prop("disabled", !1).removeClass("loading")
            }
        })
    }))
}

function initChat() {
    var t = $("#chat");
    if (t.data("chat_id")) {
        t.chat(t.data());
        var e = $(".chat-section-header__title", t),
            n = $(".chat-section-drop__bg", t),
            a = $(".chat-section-drop", t);
        e.on("click", (function (t) {
            var e;
            return t.preventDefault(), (e = a).addClass("is-active"), setTimeout((function () {
                e.addClass("is-animation")
            }), 50), !1
        })), n.on("click", (function (t) {
            var e;
            return t.preventDefault(), (e = a).removeClass("is-animation"), setTimeout((function () {
                e.removeClass("is-active")
            }), 200), !1
        }))
    }
}

function initTransactionList() {
    var t = $("#transactions-list");
    if (t.length) var e = $("#transactions-filter").on("submit", (function (n) {
        n.preventDefault();
        var a = {};
        return a[t.data("partial")] = ".js-paginated-list", e.request(t.data("action"), {
            update: a,
            success: function (t) {
                this.success(t), window.ias.resume()
            }
        }), !1
    }))
}

function initBlackList() {
    var t = $("#blacklist-customer-list");
    if (t.length) {
        var e = intlTelInput(document.getElementById("blacklist-phone"), {
                initialCountry: "ru",
                formatOnDisplay: !0,
                nationalMode: !1,
                placeholderNumberType: "MOBILE",
                utilsScript: "/themes/molvo/assets/js/intlTelInput-utils.min.js"
            }),
            n = $("#black-list-filter").on("submit", (function (e) {
                e.preventDefault();
                var a = {};
                return a[t.data("partial")] = ".js-paginated-list", n.request(t.data("action"), {
                    update: a,
                    success: function (t) {
                        this.success(t), window.ias.resume()
                    }
                }), !1
            }));
        t.on("click", ".js-blacklist-customer", (function (t) {
            const e = $(this),
                n = e.data("id");
            if (e.hasClass("js-is-loaded")) return e.trigger("toggle");
            e.prop("disabled", !0), $.request("BlackCommentList::onAjaxRequest", {
                loading: $.oc.stripeLoadIndicator,
                data: {
                    customer_id: n
                },
                update: {
                    "blacklist/customer-list-item-details": "#js-blacklist-customer-" + n
                },
                success: function (t) {
                    this.success(t), e.addClass("js-is-loaded").trigger("toggle"), autosize($("#js-blacklist-customer-" + n + " textarea"))
                },
                complete: function () {
                    e.prop("disabled", !1)
                }
            })
        })), t.on("toggle", ".js-blacklist-customer", (function (t) {
            const e = $(this),
                n = e.closest(".blacklist__row"),
                a = n.find(".blacklist__item");
            e.hasClass("is-active") ? (a.stop().slideUp("400", (function () {
                n.removeClass("is-active")
            })), e.removeClass("is-active")) : (a.stop().slideDown("400"), e.addClass("is-active"), n.addClass("is-active"))
        })), $(document).on("submit", ".js-blacklist-form", (function (n) {
            n.preventDefault();
            var a = $(this);
            if (!e.isValidNumber()) {
                var i = e.getValidationError();
                return $.oc.flashMsg({
                    text: a.data("error-" + i) || "Указан некорректный номер телефона!",
                    class: "error"
                })
            }
            var o = e.getSelectedCountryData(),
                s = $(":submit", a).prop("disabled", !0).addClass("loading");
            return grecaptcha.ready((function () {
                var e = a.find('[name="g-recaptcha-response"]');
                grecaptcha.execute($("#recaptcha-key").prop("content"), {
                    action: "blackListSubmit"
                }).then((function (n) {
                    e.val(n), a.request("BlackCommentForm::onSubmit", {
                        loading: $.oc.stripeLoadIndicator,
                        data: {
                            country: o.iso2
                        },
                        success: function (e) {
                            this.success(e), $.oc.flashMsg({
                                text: e.message || "Ошибка при обработке запроса!",
                                class: e.status ? "success" : "error",
                                interval: 7
                            }), e.status && (a[0].reset(), $.magnificPopup.close()), e.status && e.data.replace ? $("#js-blacklist-customer-row-" + e.data.customer_id).replaceWith(e.data.partial) : e.status && !e.data.replace && t.prepend(e.data.partial)
                        },
                        complete: function () {
                            s.prop("disabled", !1).removeClass("loading")
                        }
                    })
                }), (function (t) {
                    s.prop("disabled", !1).removeClass("loading")
                }))
            })), !1
        }))
    }
}

function scrollTop(t) {
    if (!t) return;
    let e = document.documentElement;
    document.addEventListener("scroll", (function () {
        let n = e.scrollHeight - e.clientHeight;
        e.scrollTop / n > .2 ? t.classList.add("show") : t.classList.remove("show")
    })), t.addEventListener("click", (function () {
        e.scrollTo({
            top: 0,
            behavior: "smooth"
        })
    })), e.clientHeight < 625 && document.body.classList.add("smallheight")
}

function initPayment() {
    $(".js-deposit-btn").on("click", (function (t) {
        return t.preventDefault(), $.request("PaymentForm::onLoadStep", {
            loading: $.oc.stripeLoadIndicator,
            success: function (t) {
                this.success(t), t.status ? openPaymentModal(t.data) : $.oc.flashMsg({
                    text: t.message || "Ошибка при обработке запроса!",
                    class: "error"
                })
            }
        }), !1
    }))
}

function openPaymentModal(t) {
    $.magnificPopup.open({
        items: {
            src: t.partial,
            type: "inline"
        },
        midClick: !0,
        removalDelay: 300,
        mainClass: "modal-animation",
        showCloseBtn: !1,
        preloader: !1,
        fixedContentPos: !0,
        callbacks: {
            open: function () {
                $(".mfp-content").prepend('<button title="Закрыть (Esc)" type="button" class="mfp-close"><i class="icon-close-blue" aria-hidden="true"></i></button>')
            },
            beforeClose: function () {
                $(".mfp-close").remove()
            }
        }
    }), initDepositForm(), initHydraDepositForm()
}

function initDepositForm() {
    var t = $("#js-deposit-form");
    t.length && (t.on("click", "button", (function (e) {
        var n = $(this).prop("disabled", !0).addClass("loading");
        t.request("PaymentForm::onLoadStep", {
            loading: $.oc.stripeLoadIndicator,
            data: {
                step: n.data("step")
            },
            success: function (t) {
                this.success(t), t.status ? openPaymentModal(t.data) : $.oc.flashMsg({
                    text: t.message || "Ошибка при обработке запроса!",
                    class: "error",
                    interval: 7
                })
            },
            complete: function () {
                n.prop("disabled", !1).removeClass("loading")
            }
        })
    })), t.on("submit", (function (t) {
        return t.preventDefault(), !1
    })), t.hasClass("js-deposit-providers") && initPaymentProviders())
}

function initPaymentProviders() {
    var t = $(".js-deposit-amount").on("change keyup", (function () {
            var n = $.trim(this.value.toString()).replace(/,/g, ".");
            n.toString() !== this.value.toString() && (this.value = n);
            var a = t.data("decimals") ? ? 3;
            if (n = parseFloat(n).toFixed(parseInt(a)), t.data("currency_rub") || (n > 0 ? e.text(this.value + " ₽ = " + parseFloat(n / t.data("usdt_rate")).toFixed(3) + " $") : e.text("1 $ = " + t.data("usdt_rate") + " ₽")), !t.data("rate") && !t.data("external")) return !0;
            "tether" !== t.data("externalId") ? t.data("external") || (n > 0 ? e.text(this.value + " " + t.data("symbol") + " = " + parseInt(n * t.data("rate") / t.data("usdt_rate")) + " $") : e.text("1 " + t.data("symbol") + " = " + parseFloat(t.data("rate") / t.data("usdt_rate")).toFixed(5) + " $")) : n > 0 ? e.text(this.value + " " + t.data("symbol") + " = " + this.value + " $") : e.text("1 " + t.data("symbol") + " = 1 $")
        })),
        e = $(".js-deposit-rate"),
        n = $(".js-deposit-bonus");
    $(".js-deposit-provider").on("change", (function () {
        var a = $(this),
            i = a.data("symbol");
        if (i !== t.data("symbol") && t.val(""), a.data("external")) return e.text(a.data("symbol") + ", " + e.data("external")), void t.trigger("change").prop({
            min: a.data("min"),
            placeholder: t.data("from") + a.data("min") + " " + ("RUR" === i ? "₽" : i)
        });
        var o = parseInt(a.data("decimals")),
            s = parseFloat(a.data("min")).toFixed(o),
            r = null;
        n.text(""), a.data("hasbonus") && (r = a.data("bonus"), n.text(`(+${r}% Bonus)`)), a.data("rate") && (s = (s / parseFloat(a.data("rate"))).toFixed(o));
        var l = t.data("from") + s + " " + i;
        t.data({
            rate: parseFloat(a.data("rate")),
            usdt_rate: a.data("usdt-rate"),
            symbol: i,
            external: a.data("external"),
            decimals: o,
            min: a.data("min"),
            externalId: a.data("external-id")
        }).prop({
            placeholder: l,
            min: s
        }), e.text(""), t.trigger("change")
    })).first().prop("checked", !0).trigger("change")
}

function initHydraDepositForm() {
    var t = $("#hydra-payments-form");
    if (t.length) {
        var e = t.find("#pay_summ").data("min");
        t.on("click", "#pay-submit", (function (n) {
            if (n.preventDefault(), Number(t.find("#pay_summ").val()) < e) return $.oc.flashMsg({
                text: "Минимальная сумма " + e + "!",
                class: "error",
                interval: 7
            }), !1;
            $(this).prop("disabled", !0).addClass("loading");
            t.request("PaylamaPaymentForm::onGetFormData", {
                loading: $.oc.stripeLoadIndicator,
                data: {
                    form: t.serialize()
                },
                success: function (t) {
                    t.result && ($("#hydra-payments-form").parent("#hydra-wrapper").addClass("number"), $("#hydra-payments-form").html('<p>Необходимо перевести деньги на указанную карту любым удобным для Вас способом <b>в течение 1 часа</b>. После этого в ближайшее время Ваш баланс пополнится на указанную сумму.</p><p><b>Номер банковской карты</b>:</p><div class="row"><div class="input-num"><input type="text" value="' + t.result + '" class="number js-copytxt"><span class="js-copybtn" data-copy="js-copytxt"></span></div><button type="button" class="b-btn b-btn--small b-btn--red hydra-payed-js">Я оплатил</button></div>'), copyText(), $("#js-deposit-form").fadeOut())
                }
            })
        })), $(document).on("click", ".hydra-payed-js", (function (t) {
            t.preventDefault(), $("#hydra-payments-form").html('<p>В течение 5 минут деньги поступят на баланс. Спасибо!</p><button type="button" class="b-btn b-btn--small b-btn--red" onclick="$.magnificPopup.close();">Закрыть окно</button>')
        }))
    }
}

function initPaylamaDepositForm() {
    var t = $("#paylama-payments-form");
    if (t.length) {
        var e = t.find("#oplata_summ").data("min");
        t.on("click", "#oplata-submit", (function (n) {
            if (n.preventDefault(), Number(t.find("#oplata_summ").val()) < e) return $.oc.flashMsg({
                text: "Минимальная сумма " + e + "!",
                class: "error",
                interval: 7
            }), !1;
            $(this).prop("disabled", !0).addClass("loading");
            t.request("PaylamaPaymentForm::onGetFormData", {
                loading: $.oc.stripeLoadIndicator,
                data: {
                    form: t.serialize()
                },
                success: function (t) {
                    let e = JSON.parse(t.result);
                    window.open(e.paymentLinks[0])
                }
            })
        }))
    }
}
/*!
Waypoints - 4.0.1
Copyright © 2011-2016 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blob/master/licenses.txt
*/
function rerenderPagination(t) {
    const e = $(".list-nav-items");
    if (!e.length) return;
    let n = getPaginationContainerInner(t);
    e.html(""), n && n.forEach((function (t) {
        e.append(t)
    }))
}

function getPaginationContainerInner(t) {
    let e = t.count,
        n = Math.ceil(e / 51);
    if (n < 2) return null;
    let a = [],
        i = "",
        o = new URL(t.url),
        s = o.search ? `${o.href}&page=` : `${o.href}?page=`;
    for (let t = 1; t <= n; t++) 4 !== t && -2 !== t || t === n || 1 === t ? t >= -2 && t <= 4 && 1 !== t ? i = $(`<a href="${s}${t}" class="list-nav-items__page">${t}</a>`) : 1 === t ? (i = $(`<span class="list-nav-items__page active">${t}</span>`), a.push(i), i = $(`<a href="${s}${t}" class="list-nav-items__robots">${t}</a>`)) : i = t === n ? $(`<a href="${s}${t}" class="list-nav-items__page">${t}</a>`) : $(`<a href="${s}${t}" class="list-nav-items__robots">${t}</a>`) : i = $('<span class="list-nav-items__page separator">...</span>'), a.push(i);
    return n > 1 && (i = $(`<a href="${s}2" class="list-nav-items__next"></a>`), a.push(i)), a
}! function (t) {
    "function" == typeof define && define.amd ? define(["jquery"], t) : "object" == typeof exports ? t(require("jquery")) : t(window.jQuery || window.Zepto)
}((function (t) {
    var e, n, a, i, o, s, r = "Close",
        l = "BeforeClose",
        c = "MarkupParse",
        d = "Open",
        u = "Change",
        p = "mfp",
        f = "." + p,
        m = "mfp-ready",
        h = "mfp-removing",
        g = "mfp-prevent-close",
        v = function () {},
        y = !!window.jQuery,
        b = t(window),
        w = function (t, n) {
            e.ev.on(p + t + f, n)
        },
        $ = function (e, n, a, i) {
            var o = document.createElement("div");
            return o.className = "mfp-" + e, a && (o.innerHTML = a), i ? n && n.appendChild(o) : (o = t(o), n && o.appendTo(n)), o
        },
        x = function (n, a) {
            e.ev.triggerHandler(p + n, a), e.st.callbacks && (n = n.charAt(0).toLowerCase() + n.slice(1), e.st.callbacks[n] && e.st.callbacks[n].apply(e, t.isArray(a) ? a : [a]))
        },
        C = function (n) {
            return n === s && e.currTemplate.closeBtn || (e.currTemplate.closeBtn = t(e.st.closeMarkup.replace("%title%", e.st.tClose)), s = n), e.currTemplate.closeBtn
        },
        _ = function () {
            t.magnificPopup.instance || ((e = new v).init(), t.magnificPopup.instance = e)
        };
    v.prototype = {
        constructor: v,
        init: function () {
            var n = navigator.appVersion;
            e.isLowIE = e.isIE8 = document.all && !document.addEventListener, e.isAndroid = /android/gi.test(n), e.isIOS = /iphone|ipad|ipod/gi.test(n), e.supportsTransition = function () {
                var t = document.createElement("p").style,
                    e = ["ms", "O", "Moz", "Webkit"];
                if (void 0 !== t.transition) return !0;
                for (; e.length;)
                    if (e.pop() + "Transition" in t) return !0;
                return !1
            }(), e.probablyMobile = e.isAndroid || e.isIOS || /(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent), a = t(document), e.popupsCache = {}
        },
        open: function (n) {
            var i;
            if (!1 === n.isObj) {
                e.items = n.items.toArray(), e.index = 0;
                var s, r = n.items;
                for (i = 0; i < r.length; i++)
                    if ((s = r[i]).parsed && (s = s.el[0]), s === n.el[0]) {
                        e.index = i;
                        break
                    }
            } else e.items = t.isArray(n.items) ? n.items : [n.items], e.index = n.index || 0;
            if (!e.isOpen) {
                e.types = [], o = "", n.mainEl && n.mainEl.length ? e.ev = n.mainEl.eq(0) : e.ev = a, n.key ? (e.popupsCache[n.key] || (e.popupsCache[n.key] = {}), e.currTemplate = e.popupsCache[n.key]) : e.currTemplate = {}, e.st = t.extend(!0, {}, t.magnificPopup.defaults, n), e.fixedContentPos = "auto" === e.st.fixedContentPos ? !e.probablyMobile : e.st.fixedContentPos, e.st.modal && (e.st.closeOnContentClick = !1, e.st.closeOnBgClick = !1, e.st.showCloseBtn = !1, e.st.enableEscapeKey = !1), e.bgOverlay || (e.bgOverlay = $("bg").on("click" + f, (function () {
                    e.close()
                })), e.wrap = $("wrap").attr("tabindex", -1).on("click" + f, (function (t) {
                    e._checkIfClose(t.target) && e.close()
                })), e.container = $("container", e.wrap)), e.contentContainer = $("content"), e.st.preloader && (e.preloader = $("preloader", e.container, e.st.tLoading));
                var l = t.magnificPopup.modules;
                for (i = 0; i < l.length; i++) {
                    var u = l[i];
                    u = u.charAt(0).toUpperCase() + u.slice(1), e["init" + u].call(e)
                }
                x("BeforeOpen"), e.st.showCloseBtn && (e.st.closeBtnInside ? (w(c, (function (t, e, n, a) {
                    n.close_replaceWith = C(a.type)
                })), o += " mfp-close-btn-in") : e.wrap.append(C())), e.st.alignTop && (o += " mfp-align-top"), e.fixedContentPos ? e.wrap.css({
                    overflow: e.st.overflowY,
                    overflowX: "hidden",
                    overflowY: e.st.overflowY
                }) : e.wrap.css({
                    top: b.scrollTop(),
                    position: "absolute"
                }), (!1 === e.st.fixedBgPos || "auto" === e.st.fixedBgPos && !e.fixedContentPos) && e.bgOverlay.css({
                    height: a.height(),
                    position: "absolute"
                }), e.st.enableEscapeKey && a.on("keyup" + f, (function (t) {
                    27 === t.keyCode && e.close()
                })), b.on("resize" + f, (function () {
                    e.updateSize()
                })), e.st.closeOnContentClick || (o += " mfp-auto-cursor"), o && e.wrap.addClass(o);
                var p = e.wH = b.height(),
                    h = {};
                if (e.fixedContentPos && e._hasScrollBar(p)) {
                    var g = e._getScrollbarSize();
                    g && (h.marginRight = g)
                }
                e.fixedContentPos && (e.isIE7 ? t("body, html").css("overflow", "hidden") : h.overflow = "hidden");
                var v = e.st.mainClass;
                return e.isIE7 && (v += " mfp-ie7"), v && e._addClassToMFP(v), e.updateItemHTML(), x("BuildControls"), t("html").css(h), e.bgOverlay.add(e.wrap).prependTo(e.st.prependTo || t(document.body)), e._lastFocusedEl = document.activeElement, setTimeout((function () {
                    e.content ? (e._addClassToMFP(m), e._setFocus()) : e.bgOverlay.addClass(m), a.on("focusin" + f, e._onFocusIn)
                }), 16), e.isOpen = !0, e.updateSize(p), x(d), n
            }
            e.updateItemHTML()
        },
        close: function () {
            e.isOpen && (x(l), e.isOpen = !1, e.st.removalDelay && !e.isLowIE && e.supportsTransition ? (e._addClassToMFP(h), setTimeout((function () {
                e._close()
            }), e.st.removalDelay)) : e._close())
        },
        _close: function () {
            x(r);
            var n = h + " " + m + " ";
            if (e.bgOverlay.detach(), e.wrap.detach(), e.container.empty(), e.st.mainClass && (n += e.st.mainClass + " "), e._removeClassFromMFP(n), e.fixedContentPos) {
                var i = {
                    marginRight: ""
                };
                e.isIE7 ? t("body, html").css("overflow", "") : i.overflow = "", t("html").css(i)
            }
            a.off("keyup.mfp focusin" + f), e.ev.off(f), e.wrap.attr("class", "mfp-wrap").removeAttr("style"), e.bgOverlay.attr("class", "mfp-bg"), e.container.attr("class", "mfp-container"), !e.st.showCloseBtn || e.st.closeBtnInside && !0 !== e.currTemplate[e.currItem.type] || e.currTemplate.closeBtn && e.currTemplate.closeBtn.detach(), e.st.autoFocusLast && e._lastFocusedEl && t(e._lastFocusedEl).focus(), e.currItem = null, e.content = null, e.currTemplate = null, e.prevHeight = 0, x("AfterClose")
        },
        updateSize: function (t) {
            if (e.isIOS) {
                var n = document.documentElement.clientWidth / window.innerWidth,
                    a = window.innerHeight * n;
                e.wrap.css("height", a), e.wH = a
            } else e.wH = t || b.height();
            e.fixedContentPos || e.wrap.css("height", e.wH), x("Resize")
        },
        updateItemHTML: function () {
            var n = e.items[e.index];
            e.contentContainer.detach(), e.content && e.content.detach(), n.parsed || (n = e.parseEl(e.index));
            var a = n.type;
            if (x("BeforeChange", [e.currItem ? e.currItem.type : "", a]), e.currItem = n, !e.currTemplate[a]) {
                var o = !!e.st[a] && e.st[a].markup;
                x("FirstMarkupParse", o), e.currTemplate[a] = !o || t(o)
            }
            i && i !== n.type && e.container.removeClass("mfp-" + i + "-holder");
            var s = e["get" + a.charAt(0).toUpperCase() + a.slice(1)](n, e.currTemplate[a]);
            e.appendContent(s, a), n.preloaded = !0, x(u, n), i = n.type, e.container.prepend(e.contentContainer), x("AfterChange")
        },
        appendContent: function (t, n) {
            e.content = t, t ? e.st.showCloseBtn && e.st.closeBtnInside && !0 === e.currTemplate[n] ? e.content.find(".mfp-close").length || e.content.append(C()) : e.content = t : e.content = "", x("BeforeAppend"), e.container.addClass("mfp-" + n + "-holder"), e.contentContainer.append(e.content)
        },
        parseEl: function (n) {
            var a, i = e.items[n];
            if (i.tagName ? i = {
                    el: t(i)
                } : (a = i.type, i = {
                    data: i,
                    src: i.src
                }), i.el) {
                for (var o = e.types, s = 0; s < o.length; s++)
                    if (i.el.hasClass("mfp-" + o[s])) {
                        a = o[s];
                        break
                    } i.src = i.el.attr("data-mfp-src"), i.src || (i.src = i.el.attr("href"))
            }
            return i.type = a || e.st.type || "inline", i.index = n, i.parsed = !0, e.items[n] = i, x("ElementParse", i), e.items[n]
        },
        addGroup: function (t, n) {
            var a = function (a) {
                a.mfpEl = this, e._openClick(a, t, n)
            };
            n || (n = {});
            var i = "click.magnificPopup";
            n.mainEl = t, n.items ? (n.isObj = !0, t.off(i).on(i, a)) : (n.isObj = !1, n.delegate ? t.off(i).on(i, n.delegate, a) : (n.items = t, t.off(i).on(i, a)))
        },
        _openClick: function (n, a, i) {
            if ((void 0 !== i.midClick ? i.midClick : t.magnificPopup.defaults.midClick) || !(2 === n.which || n.ctrlKey || n.metaKey || n.altKey || n.shiftKey)) {
                var o = void 0 !== i.disableOn ? i.disableOn : t.magnificPopup.defaults.disableOn;
                if (o)
                    if (t.isFunction(o)) {
                        if (!o.call(e)) return !0
                    } else if (b.width() < o) return !0;
                n.type && (n.preventDefault(), e.isOpen && n.stopPropagation()), i.el = t(n.mfpEl), i.delegate && (i.items = a.find(i.delegate)), e.open(i)
            }
        },
        updateStatus: function (t, a) {
            if (e.preloader) {
                n !== t && e.container.removeClass("mfp-s-" + n), a || "loading" !== t || (a = e.st.tLoading);
                var i = {
                    status: t,
                    text: a
                };
                x("UpdateStatus", i), t = i.status, a = i.text, e.preloader.html(a), e.preloader.find("a").on("click", (function (t) {
                    t.stopImmediatePropagation()
                })), e.container.addClass("mfp-s-" + t), n = t
            }
        },
        _checkIfClose: function (n) {
            if (!t(n).hasClass(g)) {
                var a = e.st.closeOnContentClick,
                    i = e.st.closeOnBgClick;
                if (a && i) return !0;
                if (!e.content || t(n).hasClass("mfp-close") || e.preloader && n === e.preloader[0]) return !0;
                if (n === e.content[0] || t.contains(e.content[0], n)) {
                    if (a) return !0
                } else if (i && t.contains(document, n)) return !0;
                return !1
            }
        },
        _addClassToMFP: function (t) {
            e.bgOverlay.addClass(t), e.wrap.addClass(t)
        },
        _removeClassFromMFP: function (t) {
            this.bgOverlay.removeClass(t), e.wrap.removeClass(t)
        },
        _hasScrollBar: function (t) {
            return (e.isIE7 ? a.height() : document.body.scrollHeight) > (t || b.height())
        },
        _setFocus: function () {
            (e.st.focus ? e.content.find(e.st.focus).eq(0) : e.wrap).focus()
        },
        _onFocusIn: function (n) {
            if (n.target !== e.wrap[0] && !t.contains(e.wrap[0], n.target)) return e._setFocus(), !1
        },
        _parseMarkup: function (e, n, a) {
            var i;
            a.data && (n = t.extend(a.data, n)), x(c, [e, n, a]), t.each(n, (function (n, a) {
                if (void 0 === a || !1 === a) return !0;
                if ((i = n.split("_")).length > 1) {
                    var o = e.find(f + "-" + i[0]);
                    if (o.length > 0) {
                        var s = i[1];
                        "replaceWith" === s ? o[0] !== a[0] && o.replaceWith(a) : "img" === s ? o.is("img") ? o.attr("src", a) : o.replaceWith(t("<img>").attr("src", a).attr("class", o.attr("class"))) : o.attr(i[1], a)
                    }
                } else e.find(f + "-" + n).html(a)
            }))
        },
        _getScrollbarSize: function () {
            if (void 0 === e.scrollbarSize) {
                var t = document.createElement("div");
                t.style.cssText = "width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;", document.body.appendChild(t), e.scrollbarSize = t.offsetWidth - t.clientWidth, document.body.removeChild(t)
            }
            return e.scrollbarSize
        }
    }, t.magnificPopup = {
        instance: null,
        proto: v.prototype,
        modules: [],
        open: function (e, n) {
            return _(), (e = e ? t.extend(!0, {}, e) : {}).isObj = !0, e.index = n || 0, this.instance.open(e)
        },
        close: function () {
            return t.magnificPopup.instance && t.magnificPopup.instance.close()
        },
        registerModule: function (e, n) {
            n.options && (t.magnificPopup.defaults[e] = n.options), t.extend(this.proto, n.proto), this.modules.push(e)
        },
        defaults: {
            disableOn: 0,
            key: null,
            midClick: !1,
            mainClass: "",
            preloader: !0,
            focus: "",
            closeOnContentClick: !1,
            closeOnBgClick: !0,
            closeBtnInside: !0,
            showCloseBtn: !0,
            enableEscapeKey: !0,
            modal: !1,
            alignTop: !1,
            removalDelay: 0,
            prependTo: null,
            fixedContentPos: "auto",
            fixedBgPos: "auto",
            overflowY: "auto",
            closeMarkup: '<button title="%title%" type="button" class="mfp-close">&#215;</button>',
            tClose: "Close (Esc)",
            tLoading: "Loading...",
            autoFocusLast: !0
        }
    }, t.fn.magnificPopup = function (n) {
        _();
        var a = t(this);
        if ("string" == typeof n)
            if ("open" === n) {
                var i, o = y ? a.data("magnificPopup") : a[0].magnificPopup,
                    s = parseInt(arguments[1], 10) || 0;
                o.items ? i = o.items[s] : (i = a, o.delegate && (i = i.find(o.delegate)), i = i.eq(s)), e._openClick({
                    mfpEl: i
                }, a, o)
            } else e.isOpen && e[n].apply(e, Array.prototype.slice.call(arguments, 1));
        else n = t.extend(!0, {}, n), y ? a.data("magnificPopup", n) : a[0].magnificPopup = n, e.addGroup(a, n);
        return a
    };
    var k, L, S, j = "inline",
        E = function () {
            S && (L.after(S.addClass(k)).detach(), S = null)
        };
    t.magnificPopup.registerModule(j, {
        options: {
            hiddenClass: "hide",
            markup: "",
            tNotFound: "Content not found"
        },
        proto: {
            initInline: function () {
                e.types.push(j), w(r + "." + j, (function () {
                    E()
                }))
            },
            getInline: function (n, a) {
                if (E(), n.src) {
                    var i = e.st.inline,
                        o = t(n.src);
                    if (o.length) {
                        var s = o[0].parentNode;
                        s && s.tagName && (L || (k = i.hiddenClass, L = $(k), k = "mfp-" + k), S = o.after(L).detach().removeClass(k)), e.updateStatus("ready")
                    } else e.updateStatus("error", i.tNotFound), o = t("<div>");
                    return n.inlineElement = o, o
                }
                return e.updateStatus("ready"), e._parseMarkup(a, {}, n), a
            }
        }
    });
    var T, I = "ajax",
        M = function () {
            T && t(document.body).removeClass(T)
        },
        P = function () {
            M(), e.req && e.req.abort()
        };
    t.magnificPopup.registerModule(I, {
        options: {
            settings: null,
            cursor: "mfp-ajax-cur",
            tError: '<a href="%url%">The content</a> could not be loaded.'
        },
        proto: {
            initAjax: function () {
                e.types.push(I), T = e.st.ajax.cursor, w(r + "." + I, P), w("BeforeChange." + I, P)
            },
            getAjax: function (n) {
                T && t(document.body).addClass(T), e.updateStatus("loading");
                var a = t.extend({
                    url: n.src,
                    success: function (a, i, o) {
                        var s = {
                            data: a,
                            xhr: o
                        };
                        x("ParseAjax", s), e.appendContent(t(s.data), I), n.finished = !0, M(), e._setFocus(), setTimeout((function () {
                            e.wrap.addClass(m)
                        }), 16), e.updateStatus("ready"), x("AjaxContentAdded")
                    },
                    error: function () {
                        M(), n.finished = n.loadError = !0, e.updateStatus("error", e.st.ajax.tError.replace("%url%", n.src))
                    }
                }, e.st.ajax.settings);
                return e.req = t.ajax(a), ""
            }
        }
    });
    var z, A = function (n) {
        if (n.data && void 0 !== n.data.title) return n.data.title;
        var a = e.st.image.titleSrc;
        if (a) {
            if (t.isFunction(a)) return a.call(e, n);
            if (n.el) return n.el.attr(a) || ""
        }
        return ""
    };
    t.magnificPopup.registerModule("image", {
        options: {
            markup: '<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',
            cursor: "mfp-zoom-out-cur",
            titleSrc: "title",
            verticalFit: !0,
            tError: '<a href="%url%">The image</a> could not be loaded.'
        },
        proto: {
            initImage: function () {
                var n = e.st.image,
                    a = ".image";
                e.types.push("image"), w(d + a, (function () {
                    "image" === e.currItem.type && n.cursor && t(document.body).addClass(n.cursor)
                })), w(r + a, (function () {
                    n.cursor && t(document.body).removeClass(n.cursor), b.off("resize" + f)
                })), w("Resize" + a, e.resizeImage), e.isLowIE && w("AfterChange", e.resizeImage)
            },
            resizeImage: function () {
                var t = e.currItem;
                if (t && t.img && e.st.image.verticalFit) {
                    var n = 0;
                    e.isLowIE && (n = parseInt(t.img.css("padding-top"), 10) + parseInt(t.img.css("padding-bottom"), 10)), t.img.css("max-height", e.wH - n)
                }
            },
            _onImageHasSize: function (t) {
                t.img && (t.hasSize = !0, z && clearInterval(z), t.isCheckingImgSize = !1, x("ImageHasSize", t), t.imgHidden && (e.content && e.content.removeClass("mfp-loading"), t.imgHidden = !1))
            },
            findImageSize: function (t) {
                var n = 0,
                    a = t.img[0],
                    i = function (o) {
                        z && clearInterval(z), z = setInterval((function () {
                            a.naturalWidth > 0 ? e._onImageHasSize(t) : (n > 200 && clearInterval(z), 3 === ++n ? i(10) : 40 === n ? i(50) : 100 === n && i(500))
                        }), o)
                    };
                i(1)
            },
            getImage: function (n, a) {
                var i = 0,
                    o = function () {
                        n && (n.img[0].complete ? (n.img.off(".mfploader"), n === e.currItem && (e._onImageHasSize(n), e.updateStatus("ready")), n.hasSize = !0, n.loaded = !0, x("ImageLoadComplete")) : ++i < 200 ? setTimeout(o, 100) : s())
                    },
                    s = function () {
                        n && (n.img.off(".mfploader"), n === e.currItem && (e._onImageHasSize(n), e.updateStatus("error", r.tError.replace("%url%", n.src))), n.hasSize = !0, n.loaded = !0, n.loadError = !0)
                    },
                    r = e.st.image,
                    l = a.find(".mfp-img");
                if (l.length) {
                    var c = document.createElement("img");
                    c.className = "mfp-img", n.el && n.el.find("img").length && (c.alt = n.el.find("img").attr("alt")), n.img = t(c).on("load.mfploader", o).on("error.mfploader", s), c.src = n.src, l.is("img") && (n.img = n.img.clone()), (c = n.img[0]).naturalWidth > 0 ? n.hasSize = !0 : c.width || (n.hasSize = !1)
                }
                return e._parseMarkup(a, {
                    title: A(n),
                    img_replaceWith: n.img
                }, n), e.resizeImage(), n.hasSize ? (z && clearInterval(z), n.loadError ? (a.addClass("mfp-loading"), e.updateStatus("error", r.tError.replace("%url%", n.src))) : (a.removeClass("mfp-loading"), e.updateStatus("ready")), a) : (e.updateStatus("loading"), n.loading = !0, n.hasSize || (n.imgHidden = !0, a.addClass("mfp-loading"), e.findImageSize(n)), a)
            }
        }
    });
    var D;
    t.magnificPopup.registerModule("zoom", {
        options: {
            enabled: !1,
            easing: "ease-in-out",
            duration: 300,
            opener: function (t) {
                return t.is("img") ? t : t.find("img")
            }
        },
        proto: {
            initZoom: function () {
                var t, n = e.st.zoom,
                    a = ".zoom";
                if (n.enabled && e.supportsTransition) {
                    var i, o, s = n.duration,
                        c = function (t) {
                            var e = t.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),
                                a = "all " + n.duration / 1e3 + "s " + n.easing,
                                i = {
                                    position: "fixed",
                                    zIndex: 9999,
                                    left: 0,
                                    top: 0,
                                    "-webkit-backface-visibility": "hidden"
                                },
                                o = "transition";
                            return i["-webkit-" + o] = i["-moz-" + o] = i["-o-" + o] = i[o] = a, e.css(i), e
                        },
                        d = function () {
                            e.content.css("visibility", "visible")
                        };
                    w("BuildControls" + a, (function () {
                        if (e._allowZoom()) {
                            if (clearTimeout(i), e.content.css("visibility", "hidden"), !(t = e._getItemToZoom())) return void d();
                            (o = c(t)).css(e._getOffset()), e.wrap.append(o), i = setTimeout((function () {
                                o.css(e._getOffset(!0)), i = setTimeout((function () {
                                    d(), setTimeout((function () {
                                        o.remove(), t = o = null, x("ZoomAnimationEnded")
                                    }), 16)
                                }), s)
                            }), 16)
                        }
                    })), w(l + a, (function () {
                        if (e._allowZoom()) {
                            if (clearTimeout(i), e.st.removalDelay = s, !t) {
                                if (!(t = e._getItemToZoom())) return;
                                o = c(t)
                            }
                            o.css(e._getOffset(!0)), e.wrap.append(o), e.content.css("visibility", "hidden"), setTimeout((function () {
                                o.css(e._getOffset())
                            }), 16)
                        }
                    })), w(r + a, (function () {
                        e._allowZoom() && (d(), o && o.remove(), t = null)
                    }))
                }
            },
            _allowZoom: function () {
                return "image" === e.currItem.type
            },
            _getItemToZoom: function () {
                return !!e.currItem.hasSize && e.currItem.img
            },
            _getOffset: function (n) {
                var a, i = (a = n ? e.currItem.img : e.st.zoom.opener(e.currItem.el || e.currItem)).offset(),
                    o = parseInt(a.css("padding-top"), 10),
                    s = parseInt(a.css("padding-bottom"), 10);
                i.top -= t(window).scrollTop() - o;
                var r = {
                    width: a.width(),
                    height: (y ? a.innerHeight() : a[0].offsetHeight) - s - o
                };
                return void 0 === D && (D = void 0 !== document.createElement("p").style.MozTransform), D ? r["-moz-transform"] = r.transform = "translate(" + i.left + "px," + i.top + "px)" : (r.left = i.left, r.top = i.top), r
            }
        }
    });
    var q = "iframe",
        O = function (t) {
            if (e.currTemplate[q]) {
                var n = e.currTemplate[q].find("iframe");
                n.length && (t || (n[0].src = "//about:blank"), e.isIE8 && n.css("display", t ? "block" : "none"))
            }
        };
    t.magnificPopup.registerModule(q, {
        options: {
            markup: '<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',
            srcAction: "iframe_src",
            patterns: {
                youtube: {
                    index: "youtube.com",
                    id: "v=",
                    src: "//www.youtube.com/embed/%id%?autoplay=1"
                },
                vimeo: {
                    index: "vimeo.com/",
                    id: "/",
                    src: "//player.vimeo.com/video/%id%?autoplay=1"
                },
                gmaps: {
                    index: "//maps.google.",
                    src: "%id%&output=embed"
                }
            }
        },
        proto: {
            initIframe: function () {
                e.types.push(q), w("BeforeChange", (function (t, e, n) {
                    e !== n && (e === q ? O() : n === q && O(!0))
                })), w(r + "." + q, (function () {
                    O()
                }))
            },
            getIframe: function (n, a) {
                var i = n.src,
                    o = e.st.iframe;
                t.each(o.patterns, (function () {
                    if (i.indexOf(this.index) > -1) return this.id && (i = "string" == typeof this.id ? i.substr(i.lastIndexOf(this.id) + this.id.length, i.length) : this.id.call(this, i)), i = this.src.replace("%id%", i), !1
                }));
                var s = {};
                return o.srcAction && (s[o.srcAction] = i), e._parseMarkup(a, s, n), e.updateStatus("ready"), a
            }
        }
    });
    var F = function (t) {
            var n = e.items.length;
            return t > n - 1 ? t - n : t < 0 ? n + t : t
        },
        B = function (t, e, n) {
            return t.replace(/%curr%/gi, e + 1).replace(/%total%/gi, n)
        };
    t.magnificPopup.registerModule("gallery", {
        options: {
            enabled: !1,
            arrowMarkup: '<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',
            preload: [0, 2],
            navigateByImgClick: !0,
            arrows: !0,
            tPrev: "Previous (Left arrow key)",
            tNext: "Next (Right arrow key)",
            tCounter: "%curr% of %total%"
        },
        proto: {
            initGallery: function () {
                var n = e.st.gallery,
                    i = ".mfp-gallery";
                if (e.direction = !0, !n || !n.enabled) return !1;
                o += " mfp-gallery", w(d + i, (function () {
                    n.navigateByImgClick && e.wrap.on("click" + i, ".mfp-img", (function () {
                        if (e.items.length > 1) return e.next(), !1
                    })), a.on("keydown" + i, (function (t) {
                        37 === t.keyCode ? e.prev() : 39 === t.keyCode && e.next()
                    }))
                })), w("UpdateStatus" + i, (function (t, n) {
                    n.text && (n.text = B(n.text, e.currItem.index, e.items.length))
                })), w(c + i, (function (t, a, i, o) {
                    var s = e.items.length;
                    i.counter = s > 1 ? B(n.tCounter, o.index, s) : ""
                })), w("BuildControls" + i, (function () {
                    if (e.items.length > 1 && n.arrows && !e.arrowLeft) {
                        var a = n.arrowMarkup,
                            i = e.arrowLeft = t(a.replace(/%title%/gi, n.tPrev).replace(/%dir%/gi, "left")).addClass(g),
                            o = e.arrowRight = t(a.replace(/%title%/gi, n.tNext).replace(/%dir%/gi, "right")).addClass(g);
                        i.click((function () {
                            e.prev()
                        })), o.click((function () {
                            e.next()
                        })), e.container.append(i.add(o))
                    }
                })), w(u + i, (function () {
                    e._preloadTimeout && clearTimeout(e._preloadTimeout), e._preloadTimeout = setTimeout((function () {
                        e.preloadNearbyImages(), e._preloadTimeout = null
                    }), 16)
                })), w(r + i, (function () {
                    a.off(i), e.wrap.off("click" + i), e.arrowRight = e.arrowLeft = null
                }))
            },
            next: function () {
                e.direction = !0, e.index = F(e.index + 1), e.updateItemHTML()
            },
            prev: function () {
                e.direction = !1, e.index = F(e.index - 1), e.updateItemHTML()
            },
            goTo: function (t) {
                e.direction = t >= e.index, e.index = t, e.updateItemHTML()
            },
            preloadNearbyImages: function () {
                var t, n = e.st.gallery.preload,
                    a = Math.min(n[0], e.items.length),
                    i = Math.min(n[1], e.items.length);
                for (t = 1; t <= (e.direction ? i : a); t++) e._preloadItem(e.index + t);
                for (t = 1; t <= (e.direction ? a : i); t++) e._preloadItem(e.index - t)
            },
            _preloadItem: function (n) {
                if (n = F(n), !e.items[n].preloaded) {
                    var a = e.items[n];
                    a.parsed || (a = e.parseEl(n)), x("LazyLoad", a), "image" === a.type && (a.img = t('<img class="mfp-img" />').on("load.mfploader", (function () {
                        a.hasSize = !0
                    })).on("error.mfploader", (function () {
                        a.hasSize = !0, a.loadError = !0, x("LazyLoadError", a)
                    })).attr("src", a.src)), a.preloaded = !0
                }
            }
        }
    }), _()
})),
function (t, e) {
    "object" == typeof exports && "undefined" != typeof module ? module.exports = e() : "function" == typeof define && define.amd ? define(e) : (t = t || self, function () {
        var n = t.Cookies,
            a = t.Cookies = e();
        a.noConflict = function () {
            return t.Cookies = n, a
        }
    }())
}(this, (function () {
    "use strict";

    function t(t) {
        for (var e = 1; e < arguments.length; e++) {
            var n = arguments[e];
            for (var a in n) t[a] = n[a]
        }
        return t
    }
    var e = {
        read: function (t) {
            return t.replace(/(%[\dA-F]{2})+/gi, decodeURIComponent)
        },
        write: function (t) {
            return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g, decodeURIComponent)
        }
    };
    var n = function n(a, i) {
        function o(e, n, o) {
            if ("undefined" != typeof document) {
                "number" == typeof (o = t({}, i, o)).expires && (o.expires = new Date(Date.now() + 864e5 * o.expires)), o.expires && (o.expires = o.expires.toUTCString()), e = encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent).replace(/[()]/g, escape), n = a.write(n, e);
                var s = "";
                for (var r in o) o[r] && (s += "; " + r, !0 !== o[r] && (s += "=" + o[r].split(";")[0]));
                return document.cookie = e + "=" + n + s
            }
        }
        return Object.create({
            set: o,
            get: function (t) {
                if ("undefined" != typeof document && (!arguments.length || t)) {
                    for (var n = document.cookie ? document.cookie.split("; ") : [], i = {}, o = 0; o < n.length; o++) {
                        var s = n[o].split("="),
                            r = s.slice(1).join("=");
                        '"' === r[0] && (r = r.slice(1, -1));
                        try {
                            var l = e.read(s[0]);
                            if (i[l] = a.read(r, l), t === l) break
                        } catch (t) {}
                    }
                    return t ? i[t] : i
                }
            },
            remove: function (e, n) {
                o(e, "", t({}, n, {
                    expires: -1
                }))
            },
            withAttributes: function (e) {
                return n(this.converter, t({}, this.attributes, e))
            },
            withConverter: function (e) {
                return n(t({}, this.converter, e), this.attributes)
            }
        }, {
            attributes: {
                value: Object.freeze(i)
            },
            converter: {
                value: Object.freeze(a)
            }
        })
    }(e, {
        path: "/"
    });
    return n
})),
function (t, e) {
    if ("function" == typeof define && define.amd) define(["module", "exports"], e);
    else if ("undefined" != typeof exports) e(module, exports);
    else {
        var n = {
            exports: {}
        };
        e(n, n.exports), t.autosize = n.exports
    }
}(this, (function (t, e) {
    "use strict";
    var n, a, i = "function" == typeof Map ? new Map : (n = [], a = [], {
            has: function (t) {
                return -1 < n.indexOf(t)
            },
            get: function (t) {
                return a[n.indexOf(t)]
            },
            set: function (t, e) {
                -1 === n.indexOf(t) && (n.push(t), a.push(e))
            },
            delete: function (t) {
                var e = n.indexOf(t); - 1 < e && (n.splice(e, 1), a.splice(e, 1))
            }
        }),
        o = function (t) {
            return new Event(t, {
                bubbles: !0
            })
        };
    try {
        new Event("test")
    } catch (t) {
        o = function (t) {
            var e = document.createEvent("Event");
            return e.initEvent(t, !0, !1), e
        }
    }

    function s(t) {
        var e = i.get(t);
        e && e.destroy()
    }

    function r(t) {
        var e = i.get(t);
        e && e.update()
    }
    var l = null;
    "undefined" == typeof window || "function" != typeof window.getComputedStyle ? ((l = function (t) {
        return t
    }).destroy = function (t) {
        return t
    }, l.update = function (t) {
        return t
    }) : ((l = function (t, e) {
        return t && Array.prototype.forEach.call(t.length ? t : [t], (function (t) {
            return function (t) {
                if (t && t.nodeName && "TEXTAREA" === t.nodeName && !i.has(t)) {
                    var e, n = null,
                        a = null,
                        s = null,
                        r = function () {
                            t.clientWidth !== a && u()
                        },
                        l = function (e) {
                            window.removeEventListener("resize", r, !1), t.removeEventListener("input", u, !1), t.removeEventListener("keyup", u, !1), t.removeEventListener("autosize:destroy", l, !1), t.removeEventListener("autosize:update", u, !1), Object.keys(e).forEach((function (n) {
                                t.style[n] = e[n]
                            })), i.delete(t)
                        }.bind(t, {
                            height: t.style.height,
                            resize: t.style.resize,
                            overflowY: t.style.overflowY,
                            overflowX: t.style.overflowX,
                            wordWrap: t.style.wordWrap
                        });
                    t.addEventListener("autosize:destroy", l, !1), "onpropertychange" in t && "oninput" in t && t.addEventListener("keyup", u, !1), window.addEventListener("resize", r, !1), t.addEventListener("input", u, !1), t.addEventListener("autosize:update", u, !1), t.style.overflowX = "hidden", t.style.wordWrap = "break-word", i.set(t, {
                        destroy: l,
                        update: u
                    }), "vertical" === (e = window.getComputedStyle(t, null)).resize ? t.style.resize = "none" : "both" === e.resize && (t.style.resize = "horizontal"), n = "content-box" === e.boxSizing ? -(parseFloat(e.paddingTop) + parseFloat(e.paddingBottom)) : parseFloat(e.borderTopWidth) + parseFloat(e.borderBottomWidth), isNaN(n) && (n = 0), u()
                }

                function c(e) {
                    var n = t.style.width;
                    t.style.width = "0px", t.offsetWidth, t.style.width = n, t.style.overflowY = e
                }

                function d() {
                    if (0 !== t.scrollHeight) {
                        var e = function (t) {
                                for (var e = []; t && t.parentNode && t.parentNode instanceof Element;) t.parentNode.scrollTop && e.push({
                                    node: t.parentNode,
                                    scrollTop: t.parentNode.scrollTop
                                }), t = t.parentNode;
                                return e
                            }(t),
                            i = document.documentElement && document.documentElement.scrollTop;
                        t.style.height = "", t.style.height = t.scrollHeight + n + "px", a = t.clientWidth, e.forEach((function (t) {
                            t.node.scrollTop = t.scrollTop
                        })), i && (document.documentElement.scrollTop = i)
                    }
                }

                function u() {
                    d();
                    var e = Math.round(parseFloat(t.style.height)),
                        n = window.getComputedStyle(t, null),
                        a = "content-box" === n.boxSizing ? Math.round(parseFloat(n.height)) : t.offsetHeight;
                    if (a < e ? "hidden" === n.overflowY && (c("scroll"), d(), a = "content-box" === n.boxSizing ? Math.round(parseFloat(window.getComputedStyle(t, null).height)) : t.offsetHeight) : "hidden" !== n.overflowY && (c("hidden"), d(), a = "content-box" === n.boxSizing ? Math.round(parseFloat(window.getComputedStyle(t, null).height)) : t.offsetHeight), s !== a) {
                        s = a;
                        var i = o("autosize:resized");
                        try {
                            t.dispatchEvent(i)
                        } catch (e) {}
                    }
                }
            }(t)
        })), t
    }).destroy = function (t) {
        return t && Array.prototype.forEach.call(t.length ? t : [t], s), t
    }, l.update = function (t) {
        return t && Array.prototype.forEach.call(t.length ? t : [t], r), t
    }), e.default = l, t.exports = e.default
})),
function (t, e) {
    "object" == typeof exports && "undefined" != typeof module ? module.exports = e() : "function" == typeof define && define.amd ? define(e) : (t = "undefined" != typeof globalThis ? globalThis : t || self).autocomplete = e()
}(this, (function () {
    "use strict";
    return function (t) {
        var e, n, a = document,
            i = t.container || a.createElement("div"),
            o = i.style,
            s = navigator.userAgent,
            r = ~s.indexOf("Firefox") && ~s.indexOf("Mobile"),
            l = t.debounceWaitMs || 0,
            c = t.preventSubmit || !1,
            d = t.disableAutoSelect || !1,
            u = r ? "input" : "keyup",
            p = [],
            f = "",
            m = 2,
            h = t.showOnFocus,
            g = 0;
        if (void 0 !== t.minLength && (m = t.minLength), !t.input) throw new Error("input undefined");
        var v = t.input;

        function y() {
            n && window.clearTimeout(n)
        }

        function b() {
            return !!i.parentNode
        }

        function w() {
            var t;
            g++, p = [], f = "", e = void 0, (t = i.parentNode) && t.removeChild(i)
        }

        function $() {
            for (; i.firstChild;) i.removeChild(i.firstChild);
            var n = function (t, e) {
                var n = a.createElement("div");
                return n.textContent = t.label || "", n
            };
            t.render && (n = t.render);
            var s = function (t, e) {
                var n = a.createElement("div");
                return n.textContent = t, n
            };
            t.renderGroup && (s = t.renderGroup);
            var r = a.createDocumentFragment(),
                l = "#9?$";
            if (p.forEach((function (a) {
                    if (a.group && a.group !== l) {
                        l = a.group;
                        var i = s(a.group, f);
                        i && (i.className += " group", r.appendChild(i))
                    }
                    var o = n(a, f);
                    o && (o.addEventListener("click", (function (e) {
                        t.onSelect(a, v), w(), e.preventDefault(), e.stopPropagation()
                    })), a === e && (o.className += " selected"), r.appendChild(o))
                })), i.appendChild(r), p.length < 1) {
                var c = t.emptyMsg;
                if (c && "function" == typeof c && (c = c()), !c) return void w();
                var d = a.createElement("div");
                d.className = "empty", d.textContent = c, i.appendChild(d)
            }
            i.parentNode || a.body.appendChild(i),
                function () {
                    if (b()) {
                        o.height = "auto", o.width = v.offsetWidth + "px";
                        var e, n = 0;
                        s(), s(), t.customize && e && t.customize(v, e, i, n)
                    }

                    function s() {
                        var t = a.documentElement,
                            i = t.clientTop || a.body.clientTop || 0,
                            s = t.clientLeft || a.body.clientLeft || 0,
                            r = window.pageYOffset || t.scrollTop,
                            l = window.pageXOffset || t.scrollLeft,
                            c = (e = v.getBoundingClientRect()).top + v.offsetHeight + r - i,
                            d = e.left + l - s;
                        o.top = c + "px", o.left = d + "px", (n = window.innerHeight - (e.top + v.offsetHeight)) < 0 && (n = 0), o.top = c + "px", o.bottom = "", o.left = d + "px", o.maxHeight = n + "px"
                    }
                }(),
                function () {
                    var t = i.getElementsByClassName("selected");
                    if (t.length > 0) {
                        var e = t[0],
                            n = e.previousElementSibling;
                        if (n && -1 !== n.className.indexOf("group") && !n.previousElementSibling && (e = n), e.offsetTop < i.scrollTop) i.scrollTop = e.offsetTop;
                        else {
                            var a = e.offsetTop + e.offsetHeight,
                                o = i.scrollTop + i.offsetHeight;
                            a > o && (i.scrollTop += a - o)
                        }
                    }
                }()
        }

        function x() {
            b() && $()
        }

        function C() {
            x()
        }

        function _(t) {
            t.target !== i ? x() : t.preventDefault()
        }

        function k(e) {
            for (var n = e.which || e.keyCode || 0, a = 0, i = t.keysToIgnore || [38, 13, 27, 39, 37, 16, 17, 18, 20, 91, 9]; a < i.length; a++) {
                if (n === i[a]) return
            }
            n >= 112 && n <= 123 && !t.keysToIgnore || 40 === n && b() || j(0)
        }

        function L(n) {
            var a = n.which || n.keyCode || 0;
            if (38 === a || 40 === a || 27 === a) {
                var i = b();
                if (27 === a) w();
                else {
                    if (!i || p.length < 1) return;
                    38 === a ? function () {
                        if (p.length < 1) e = void 0;
                        else if (e === p[0]) e = p[p.length - 1];
                        else
                            for (var t = p.length - 1; t > 0; t--)
                                if (e === p[t] || 1 === t) {
                                    e = p[t - 1];
                                    break
                                }
                    }() : function () {
                        if (p.length < 1 && (e = void 0), e && e !== p[p.length - 1]) {
                            for (var t = 0; t < p.length - 1; t++)
                                if (e === p[t]) {
                                    e = p[t + 1];
                                    break
                                }
                        } else e = p[0]
                    }(), $()
                }
                return n.preventDefault(), void(i && n.stopPropagation())
            }
            13 === a && (e && (t.onSelect(e, v), w()), c && n.preventDefault())
        }

        function S() {
            h && j(1)
        }

        function j(a) {
            var i = ++g,
                o = v.value,
                s = v.selectionStart || 0;
            o.length >= m || 1 === a ? (y(), n = window.setTimeout((function () {
                t.fetch(o, (function (t) {
                    g === i && t && (f = o, e = (p = t).length < 1 || d ? void 0 : p[0], $())
                }), a, s)
            }), 0 === a ? l : 0)) : w()
        }

        function E() {
            setTimeout((function () {
                a.activeElement !== v && w()
            }), 200)
        }
        return i.className = "autocomplete " + (t.className || ""), o.position = "absolute", i.addEventListener("mousedown", (function (t) {
            t.stopPropagation(), t.preventDefault()
        })), i.addEventListener("focus", (function () {
            return v.focus()
        })), v.addEventListener("keydown", L), v.addEventListener(u, k), v.addEventListener("blur", E), v.addEventListener("focus", S), window.addEventListener("resize", C), a.addEventListener("scroll", _, !0), {
            destroy: function () {
                v.removeEventListener("focus", S), v.removeEventListener("keydown", L), v.removeEventListener(u, k), v.removeEventListener("blur", E), window.removeEventListener("resize", C), a.removeEventListener("scroll", _, !0), y(), w()
            }
        }
    }
})),
function (t) {
    t(document).on("click", '[data-lightbox="chat"]', (function (e) {
        var n = t(this).attr("href");
        return t(this).magnificPopup({
            items: {
                src: n,
                type: "image"
            },
            closeOnContentClick: !1,
            closeBtnInside: !1,
            midClick: !0,
            showCloseBtn: !1,
            removalDelay: 300,
            mainClass: "modal-animation",
            tClose: "Закрыть (Esc)",
            tLoading: "Загрузка...",
            image: {
                verticalFit: !0,
                tError: '<a href="%url%">Изображение</a> не может быть загружено.'
            },
            gallery: {
                enabled: !1
            },
            callbacks: {
                open: function () {
                    t(".mfp-content").prepend('<button title="Закрыть (Esc)" type="button" class="mfp-close"><i class="icon-close-blue" aria-hidden="true"></i></button>')
                },
                beforeClose: function () {
                    t(".mfp-close").remove()
                }
            }
        }).magnificPopup("open"), !1
    })), t.chat = function (e, n) {
        var a = this;
        a.$el = t(e), a.el = e, a.$el.data("chat", a), a.init = function () {
            a.options = t.extend({}, t.chat.defaultOptions, n), a.$form = t(".js-message-form", a.$el), a.$list = t(".js-messages-list", a.$el), a.srcAvatar = t(".js-user-avatar", a.$el).prop("src"), a.hasDays = {}, a.messages = {}, a.unreadQueue = [], a.unreadTimeout = null, a.initEcho(), a.listenToEvents(), a.loadMessages(), a.setBlockLevel(a.options.block)
        }, a.initEcho = function () {
            window.Echo = new Echo({
                broadcaster: "pusher",
                key: a.options.key,
                wsHost: a.options.host,
                wsPort: a.options.port,
                forceTLS: !1,
                auth: {
                    headers: {
                        "X-CSRF-Token": t('meta[name="csrf-token"]').prop("content")
                    }
                },
                disableStats: !0
            })
        }, a.listenToEvents = function () {
            a.isVisible((function () {
                a.isVisible() && a.unreadQueue.length && a.queueSendRead()
            })), a.$form.on("submit", (function (e) {
                e.preventDefault(), a.options.block || (a.sendMessage(), t(".js-messages-uploaded", a.$form).removeClass("is-file-add"))
            })).on("click", ".js-messages-remove-uploaded", (function (e) {
                return e.preventDefault(), t(".js-messages-uploaded", a.$form).removeClass("is-file-add"), a.removeUploaded(t(this)), !1
            })), a.$fileInput = t(".js-message-file", a.$form).on("change", (function (t) {
                t.preventDefault(), this.value.length && a.uploadFile()
            })), a.$uploadButton = t(".js-message-upload", a.$form).on("click", (function (t) {
                t.preventDefault(), a.options.block || a.$fileInput.trigger("click")
            })), t(".js-user-block", a.$el).on("click", (function (e) {
                e.preventDefault(), a.updateUserBlock(t(this))
            })), t(".js-chat-delete", a.$el).on("click", (function (e) {
                e.preventDefault(), a.deleteChat(t(this))
            })), a.$textarea = t("textarea", a.$form).on("keydown", (function (e) {
                e.ctrlKey && 13 === e.keyCode && t.trim(this.value).length && a.$form.trigger("submit")
            })), autosize(a.$textarea).on("autosize:resized", (function () {
                scrollToBottom(t(".chat-section__list")), iosHeight()
            })), iosHeight(), scrollToBottom(t(".chat-section__list")), window.Echo.join("chat." + a.options.chat_id).listen(".chat.newMessage", (function (t) {
                a.appendMessage(t)
            })).listen(".chat.messagesRead", (function (t) {
                a.markReadMessages(t)
            }))
        }, a.showUploadedFile = function (e) {
            t(".js-messages-uploaded", a.$form).addClass("is-file-add").html('<div class="chat-upload">' + (e.thumb ? '<div class="chat-upload__image"><img src="' + e.thumb + '" alt="' + e.name + '" style="height:50px"></div>' : "") + '<div class="chat-upload__file">' + e.name + " (" + e.size + ')</div><button type="button" class="chat-upload__button js-messages-remove-uploaded" data-file_id="' + e.id + '"><i class="icon-close"></i></button></div>'), scrollToBottom(t(".chat-section__list")), iosHeight()
        }, a.uploadFile = function () {
            a.options.block = !0, t(":submit", a.$form).prop("disabled", !0).addClass("loading"), a.$form.request("ChatMessages::onUpload", {
                loading: t.oc.stripeLoadIndicator,
                files: !0,
                success: function (e) {
                    e.status || t.oc.flashMsg({
                        text: e.message || "Ошибка загрузки файла!",
                        class: "error"
                    }), e.data && e.data.file && (a.showUploadedFile(e.data.file), t('[name="has_file"]', a.$form).val(1)), this.success(e)
                },
                complete: function () {
                    t(":submit", a.$form).prop("disabled", !1).removeClass("loading"), a.options.block = !1
                }
            })
        }, a.removeUploaded = function (e) {
            e.hasClass("loading") || (e.addClass("loading"), t('[name="has_file"]', a.$form).val(0), a.$form.request("ChatMessages::onRemoveUploaded", {
                data: {
                    file_id: e.data("file_id")
                },
                loading: t.oc.stripeLoadIndicator,
                success: function (e) {
                    t(".js-messages-uploaded", a.$form).empty(), this.success(e)
                },
                complete: function () {
                    e.removeClass("loading")
                }
            }))
        }, a.updateUserBlock = function (e) {
            e.hasClass("loading") || (e.addClass("loading"), t.request("ChatMessages::onBlackList", {
                data: {
                    block: 1 !== a.options.block && 3 !== a.options.block ? 1 : 0
                },
                loading: t.oc.stripeLoadIndicator,
                success: function (n) {
                    t.oc.flashMsg({
                        text: n.message || "Ошибка обработки запроса!",
                        class: n.status ? "success" : "error"
                    }), this.success(n), n.status && n.data && a.setBlockLevel(n.data.block);
                    var i = 1 === a.options.block || 3 === a.options.block;
                    e[i ? "addClass" : "removeClass"]("is-blocked").find("span").text(e.data(i ? "unblock" : "block"))
                },
                complete: function () {
                    e.removeClass("loading")
                }
            }))
        }, a.deleteChat = function (e) {
            e.hasClass("loading") || (e.addClass("loading"), t.request("ChatMessages::onDeleteChat", {
                data: {},
                loading: t.oc.stripeLoadIndicator,
                success: function (e) {
                    e.status ? window.location.href = e.data.redirect : t.oc.flashMsg({
                        text: e.message || "Ошибка обработки запроса!",
                        class: "error"
                    })
                },
                complete: function () {
                    e.removeClass("loading")
                }
            }))
        }, a.loadMessages = function () {
            t.request("ChatMessages::onLoad", {
                loading: t.oc.stripeLoadIndicator,
                success: function (e) {
                    e.status || t.oc.flashMsg({
                        text: e.message || "Ошибка загрузки сообщений!",
                        class: "error"
                    }), this.success(e), e.data && e.data.messages.length && t.each(e.data.messages, (function (t, e) {
                        a.appendMessage(e)
                    })), scrollToBottom(t(".chat-section__list")), iosHeight()
                }
            })
        }, a.queueSendRead = function (t) {
            clearTimeout(a.unreadTimeout), t && a.unreadQueue.push(t), a.isVisible() && setTimeout((function () {
                a.sendRead()
            }), 1e3)
        }, a.sendRead = function () {
            if (a.unreadQueue.length) {
                var e = a.unreadQueue.splice(0, a.unreadQueue.length);
                t.request("ChatMessages::onRead", {
                    data: {
                        ids: e
                    }
                })
            }
        }, a.markReadMessages = function (e) {
            a.$list.children(".js-is-unread").each((function (n, a) {
                a = t(a), -1 !== e.indexOf(parseInt(a.data("id"))) && a.removeClass("js-is-unread")
            }))
        }, a.setBlockLevel = function (e) {
            e = parseInt(e) || 0;
            var n = t("textarea", a.$form),
                i = "Написать сообщение";
            e && (i = e < 2 ? "Разблокируйте пользователя для отправки сообщений!" : "Пользователь ограничил получение сообщений!", n.val("")), n.prop({
                placeholder: i,
                disabled: !!e
            }), a.options.block = e
        }, a.sendMessage = function () {
            a.options.block || (t(":submit", a.$form).prop("disabled", !0).addClass("loading"), a.$form.request("ChatMessages::onSend", {
                loading: t.oc.stripeLoadIndicator,
                files: !1,
                success: function (e) {
                    e.status || t.oc.flashMsg({
                        text: e.message || "Ошибка отправки сообщения!",
                        class: "error"
                    }), e.data && e.data.message && (t(".js-messages-uploaded", a.$form).empty(), a.appendMessage(e.data.message), a.$form[0].reset()), this.success(e)
                },
                complete: function () {
                    t(":submit", a.$form).prop("disabled", !1).removeClass("loading"), autosize.update(a.$textarea), scrollToBottom(t(".chat-section__list")), iosHeight()
                }
            }))
        }, a.appendMessage = function (t) {
            if (!a.messages[t.id]) {
                var e = new Date(1e3 * t.created_at),
                    n = a.formatDate(e),
                    i = a.formatTime(e);
                if (!a.hasDays[n]) {
                    a.hasDays[n] = !0;
                    var o = a.isToday(e) ? a.options.today : n;
                    a.$list.append('<div class="chat-section__date">' + o + "</div>")
                }
                var s = t.user_id === a.options.author_id ? " is-author" : "",
                    r = '<div class="chat-section__row' + s + (t.read_at ? "" : " js-is-unread") + '" data-id="' + t.id + '">';
                s || (r += '<div class="chat-section__user"><img src="' + a.srcAvatar + '"></div>'), s || t.read_at || a.queueSendRead(t.id), r += '<div class="chat-section__text">', t.file && t.file.thumb && (r += '<a data-lightbox="chat" href="' + t.file.url + '" target="_blank" class="chat-section__image">', r += '<img src="' + t.file.thumb + '" alt="' + t.file.name + '">', r += "</a>"), r += '<div class="chat-section__float">', r += '<span class="chat-section__time" title="' + n + " " + i + '">' + i + "</span> ", s && (r += '<i class="icon-chat-check"></i>'), r += "</div>", r += t.content, r += "</div></div>", a.$list.append(r), a.messages[t.id] = t
            }
        }, a.formatDate = function (t) {
            return ("0" + t.getDate()).slice(-2) + "." + ("0" + (t.getMonth() + 1)).slice(-2) + "." + t.getFullYear()
        }, a.formatTime = function (t) {
            return ("0" + t.getHours()).slice(-2) + ":" + ("0" + t.getMinutes()).slice(-2)
        }, a.isToday = function (t, e) {
            return (e = e || (new Date).setHours(0, 0, 0, 0)) === (t = t.setHours(0, 0, 0, 0))
        }, a.isVisible = function () {
            var t, e, n = {
                hidden: "visibilitychange",
                webkitHidden: "webkitvisibilitychange",
                mozHidden: "mozvisibilitychange",
                msHidden: "msvisibilitychange"
            };
            for (t in n)
                if (t in document) {
                    e = n[t];
                    break
                } return function (n) {
                return n && document.addEventListener(e, n), !document[t]
            }
        }(), a.init()
    }, t.chat.defaultOptions = {
        chat_id: null,
        author_id: null,
        key: "4365bc50ed2546699281",
        host: window.location.hostname,
        today: "Сегодня",
        port: 6001,
        block: 0
    }, t.fn.chat = function (e) {
        return this.each((function () {
            new t.chat(this, e)
        }))
    }
}(jQuery),
function (t) {
    var e = function (e, n) {
        this.$map = t(e), this.options = t.extend(!0, {}, t.fn.sexmap.defaults, n), this.markers = L.markerClusterGroup({
            chunkedLoading: !0
        }), this.icons = [], this.initFilter(), this.initMap()
    };
    e.prototype = {
        initFilter: function () {
            var e = this;
            this.$form = t(this.options.filter), this.$form.on("update", (function () {
                e.getListData()
            })), this.$form.on("change", "input:not(.no-f), select", (function () {
                e.$form.trigger("update")
            }))
        },
        initMap: function () {
            var e = this;
            e.addIcons();
            var n = L.latLng(e.options.lat, e.options.lng);
            e.map = L.map(e.$map.prop("id"), {
                attributionControl: !1,
                zoomControl: !1,
                center: n,
                zoom: e.options.zoom,
                layers: [L.yandex()]
            }), L.control.zoom({
                position: "topright"
            }).addTo(e.map), t(".single_person--map").length ? e.getPersonData() : e.getListData()
        },
        processMarkerClick: function (e) {
            if (!t(".single_person--map").length) {
                var n = e.target;
                n.loading || void 0 !== n._popup || (n.loading = !0, t.request("Map::onPopup", {
                    loading: t.oc.stripeLoadIndicator,
                    data: {
                        item_id: n.options.id,
                        category_id: n.options.category_id
                    },
                    success: function (e) {
                        if (!e.status) return t.oc.flashMsg({
                            text: e.message || "Ошибка при обработке запроса!",
                            class: "error",
                            interval: 7
                        });
                        n.bindPopup(e.data.content).openPopup()
                    },
                    complete: function () {
                        n.loading = !1
                    }
                }))
            }
        },
        processMarkerData: function (t) {
            var e = void 0 !== this.icons[t[4]] ? {
                icon: this.icons[t[4]]
            } : {};
            e.title = t[3], e.id = t[0], e.category_id = t[4];
            var n = L.marker(L.latLng(t[1], t[2]), e);
            n.on("click", this.processMarkerClick), this.markers.addLayer(n)
        },
        getListData: function () {
            var e = this;
            this.$form.find("input").prop("readonly", !0), this.$form.request("Map::onList", {
                loading: t.oc.stripeLoadIndicator,
                success: function (t) {
                    e.markers.clearLayers();
                    var n = t.data.length;
                    if (n) {
                        for (var a = 0; a < n; a++) e.processMarkerData(t.data[a]);
                        e.map.addLayer(e.markers), e.fitBounds()
                    }
                },
                complete: function () {
                    e.$form.find("input").prop("readonly", !1)
                }
            })
        },
        getPersonData: function () {
            var e = this;
            let n = t(".single_person--map").data("person-id");
            t.request("Map::onGetPerson", {
                loading: t.oc.stripeLoadIndicator,
                data: {
                    item_id: n
                },
                success: function (t) {
                    t.data.length && (e.processMarkerData(t.data), e.map.addLayer(e.markers), e.fitBounds())
                }
            })
        },
        addIcons: function () {
            for (var t = 0; t < 6; t++) this.addIcon(t)
        },
        addIcon: function (t) {
            this.icons[t] = new L.Icon({
                iconUrl: "/themes/molvo/assets/images/pin-" + t + ".svg",
                iconSize: [46, 56],
                iconAnchor: [23, 35],
                popupAnchor: [1, -34]
            })
        },
        fitBounds: function () {
            var t = this.markers.getBounds();
            t.isValid() && this.map.fitBounds(t, {
                padding: [50, 50]
            })
        }
    }, t.fn.sexmap = function (t) {
        return new e(this, t)
    }, t.fn.sexmap.Constructor = e, t.fn.sexmap.defaults = {
        lat: 62.476803,
        lng: 99.57475,
        zoom: 4,
        filter: "#map-filter"
    }
}(window.jQuery), scrollTop(document.querySelector("#b_scroller")),
    function () {
        "use strict";
        var t = 0,
            e = {};

        function n(a) {
            if (!a) throw new Error("No options passed to Waypoint constructor");
            if (!a.element) throw new Error("No element option passed to Waypoint constructor");
            if (!a.handler) throw new Error("No handler option passed to Waypoint constructor");
            this.key = "waypoint-" + t, this.options = n.Adapter.extend({}, n.defaults, a), this.element = this.options.element, this.adapter = new n.Adapter(this.element), this.callback = a.handler, this.axis = this.options.horizontal ? "horizontal" : "vertical", this.enabled = this.options.enabled, this.triggerPoint = null, this.group = n.Group.findOrCreate({
                name: this.options.group,
                axis: this.axis
            }), this.context = n.Context.findOrCreateByElement(this.options.context), n.offsetAliases[this.options.offset] && (this.options.offset = n.offsetAliases[this.options.offset]), this.group.add(this), this.context.add(this), e[this.key] = this, t += 1
        }
        n.prototype.queueTrigger = function (t) {
            this.group.queueTrigger(this, t)
        }, n.prototype.trigger = function (t) {
            this.enabled && this.callback && this.callback.apply(this, t)
        }, n.prototype.destroy = function () {
            this.context.remove(this), this.group.remove(this), delete e[this.key]
        }, n.prototype.disable = function () {
            return this.enabled = !1, this
        }, n.prototype.enable = function () {
            return this.context.refresh(), this.enabled = !0, this
        }, n.prototype.next = function () {
            return this.group.next(this)
        }, n.prototype.previous = function () {
            return this.group.previous(this)
        }, n.invokeAll = function (t) {
            var n = [];
            for (var a in e) n.push(e[a]);
            for (var i = 0, o = n.length; i < o; i++) n[i][t]()
        }, n.destroyAll = function () {
            n.invokeAll("destroy")
        }, n.disableAll = function () {
            n.invokeAll("disable")
        }, n.enableAll = function () {
            for (var t in n.Context.refreshAll(), e) e[t].enabled = !0;
            return this
        }, n.refreshAll = function () {
            n.Context.refreshAll()
        }, n.viewportHeight = function () {
            return window.innerHeight || document.documentElement.clientHeight
        }, n.viewportWidth = function () {
            return document.documentElement.clientWidth
        }, n.adapters = [], n.defaults = {
            context: window,
            continuous: !0,
            enabled: !0,
            group: "default",
            horizontal: !1,
            offset: 0
        }, n.offsetAliases = {
            "bottom-in-view": function () {
                return this.context.innerHeight() - this.adapter.outerHeight()
            },
            "right-in-view": function () {
                return this.context.innerWidth() - this.adapter.outerWidth()
            }
        }, window.Waypoint = n
    }(),
    function () {
        "use strict";

        function t(t) {
            window.setTimeout(t, 1e3 / 60)
        }
        var e = 0,
            n = {},
            a = window.Waypoint,
            i = window.onload;

        function o(t) {
            this.element = t, this.Adapter = a.Adapter, this.adapter = new this.Adapter(t), this.key = "waypoint-context-" + e, this.didScroll = !1, this.didResize = !1, this.oldScroll = {
                x: this.adapter.scrollLeft(),
                y: this.adapter.scrollTop()
            }, this.waypoints = {
                vertical: {},
                horizontal: {}
            }, t.waypointContextKey = this.key, n[t.waypointContextKey] = this, e += 1, a.windowContext || (a.windowContext = !0, a.windowContext = new o(window)), this.createThrottledScrollHandler(), this.createThrottledResizeHandler()
        }
        o.prototype.add = function (t) {
            var e = t.options.horizontal ? "horizontal" : "vertical";
            this.waypoints[e][t.key] = t, this.refresh()
        }, o.prototype.checkEmpty = function () {
            var t = this.Adapter.isEmptyObject(this.waypoints.horizontal),
                e = this.Adapter.isEmptyObject(this.waypoints.vertical),
                a = this.element == this.element.window;
            t && e && !a && (this.adapter.off(".waypoints"), delete n[this.key])
        }, o.prototype.createThrottledResizeHandler = function () {
            var t = this;

            function e() {
                t.handleResize(), t.didResize = !1
            }
            this.adapter.on("resize.waypoints", (function () {
                t.didResize || (t.didResize = !0, a.requestAnimationFrame(e))
            }))
        }, o.prototype.createThrottledScrollHandler = function () {
            var t = this;

            function e() {
                t.handleScroll(), t.didScroll = !1
            }
            this.adapter.on("scroll.waypoints", (function () {
                t.didScroll && !a.isTouch || (t.didScroll = !0, a.requestAnimationFrame(e))
            }))
        }, o.prototype.handleResize = function () {
            a.Context.refreshAll()
        }, o.prototype.handleScroll = function () {
            var t = {},
                e = {
                    horizontal: {
                        newScroll: this.adapter.scrollLeft(),
                        oldScroll: this.oldScroll.x,
                        forward: "right",
                        backward: "left"
                    },
                    vertical: {
                        newScroll: this.adapter.scrollTop(),
                        oldScroll: this.oldScroll.y,
                        forward: "down",
                        backward: "up"
                    }
                };
            for (var n in e) {
                var a = e[n],
                    i = a.newScroll > a.oldScroll ? a.forward : a.backward;
                for (var o in this.waypoints[n]) {
                    var s = this.waypoints[n][o];
                    if (null !== s.triggerPoint) {
                        var r = a.oldScroll < s.triggerPoint,
                            l = a.newScroll >= s.triggerPoint;
                        (r && l || !r && !l) && (s.queueTrigger(i), t[s.group.id] = s.group)
                    }
                }
            }
            for (var c in t) t[c].flushTriggers();
            this.oldScroll = {
                x: e.horizontal.newScroll,
                y: e.vertical.newScroll
            }
        }, o.prototype.innerHeight = function () {
            return this.element == this.element.window ? a.viewportHeight() : this.adapter.innerHeight()
        }, o.prototype.remove = function (t) {
            delete this.waypoints[t.axis][t.key], this.checkEmpty()
        }, o.prototype.innerWidth = function () {
            return this.element == this.element.window ? a.viewportWidth() : this.adapter.innerWidth()
        }, o.prototype.destroy = function () {
            var t = [];
            for (var e in this.waypoints)
                for (var n in this.waypoints[e]) t.push(this.waypoints[e][n]);
            for (var a = 0, i = t.length; a < i; a++) t[a].destroy()
        }, o.prototype.refresh = function () {
            var t, e = this.element == this.element.window,
                n = e ? void 0 : this.adapter.offset(),
                i = {};
            for (var o in this.handleScroll(), t = {
                    horizontal: {
                        contextOffset: e ? 0 : n.left,
                        contextScroll: e ? 0 : this.oldScroll.x,
                        contextDimension: this.innerWidth(),
                        oldScroll: this.oldScroll.x,
                        forward: "right",
                        backward: "left",
                        offsetProp: "left"
                    },
                    vertical: {
                        contextOffset: e ? 0 : n.top,
                        contextScroll: e ? 0 : this.oldScroll.y,
                        contextDimension: this.innerHeight(),
                        oldScroll: this.oldScroll.y,
                        forward: "down",
                        backward: "up",
                        offsetProp: "top"
                    }
                }) {
                var s = t[o];
                for (var r in this.waypoints[o]) {
                    var l, c, d, u, p = this.waypoints[o][r],
                        f = p.options.offset,
                        m = p.triggerPoint,
                        h = 0,
                        g = null == m;
                    p.element !== p.element.window && (h = p.adapter.offset()[s.offsetProp]), "function" == typeof f ? f = f.apply(p) : "string" == typeof f && (f = parseFloat(f), p.options.offset.indexOf("%") > -1 && (f = Math.ceil(s.contextDimension * f / 100))), l = s.contextScroll - s.contextOffset, p.triggerPoint = Math.floor(h + l - f), c = m < s.oldScroll, d = p.triggerPoint >= s.oldScroll, u = !c && !d, !g && (c && d) ? (p.queueTrigger(s.backward), i[p.group.id] = p.group) : (!g && u || g && s.oldScroll >= p.triggerPoint) && (p.queueTrigger(s.forward), i[p.group.id] = p.group)
                }
            }
            return a.requestAnimationFrame((function () {
                for (var t in i) i[t].flushTriggers()
            })), this
        }, o.findOrCreateByElement = function (t) {
            return o.findByElement(t) || new o(t)
        }, o.refreshAll = function () {
            for (var t in n) n[t].refresh()
        }, o.findByElement = function (t) {
            return n[t.waypointContextKey]
        }, window.onload = function () {
            i && i(), o.refreshAll()
        }, a.requestAnimationFrame = function (e) {
            (window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || t).call(window, e)
        }, a.Context = o
    }(),
    function () {
        "use strict";

        function t(t, e) {
            return t.triggerPoint - e.triggerPoint
        }

        function e(t, e) {
            return e.triggerPoint - t.triggerPoint
        }
        var n = {
                vertical: {},
                horizontal: {}
            },
            a = window.Waypoint;

        function i(t) {
            this.name = t.name, this.axis = t.axis, this.id = this.name + "-" + this.axis, this.waypoints = [], this.clearTriggerQueues(), n[this.axis][this.name] = this
        }
        i.prototype.add = function (t) {
            this.waypoints.push(t)
        }, i.prototype.clearTriggerQueues = function () {
            this.triggerQueues = {
                up: [],
                down: [],
                left: [],
                right: []
            }
        }, i.prototype.flushTriggers = function () {
            for (var n in this.triggerQueues) {
                var a = this.triggerQueues[n],
                    i = "up" === n || "left" === n;
                a.sort(i ? e : t);
                for (var o = 0, s = a.length; o < s; o += 1) {
                    var r = a[o];
                    (r.options.continuous || o === a.length - 1) && r.trigger([n])
                }
            }
            this.clearTriggerQueues()
        }, i.prototype.next = function (e) {
            this.waypoints.sort(t);
            var n = a.Adapter.inArray(e, this.waypoints);
            return n === this.waypoints.length - 1 ? null : this.waypoints[n + 1]
        }, i.prototype.previous = function (e) {
            this.waypoints.sort(t);
            var n = a.Adapter.inArray(e, this.waypoints);
            return n ? this.waypoints[n - 1] : null
        }, i.prototype.queueTrigger = function (t, e) {
            this.triggerQueues[e].push(t)
        }, i.prototype.remove = function (t) {
            var e = a.Adapter.inArray(t, this.waypoints);
            e > -1 && this.waypoints.splice(e, 1)
        }, i.prototype.first = function () {
            return this.waypoints[0]
        }, i.prototype.last = function () {
            return this.waypoints[this.waypoints.length - 1]
        }, i.findOrCreate = function (t) {
            return n[t.axis][t.name] || new i(t)
        }, a.Group = i
    }(),
    function () {
        "use strict";
        var t = window.jQuery,
            e = window.Waypoint;

        function n(e) {
            this.$element = t(e)
        }
        t.each(["innerHeight", "innerWidth", "off", "offset", "on", "outerHeight", "outerWidth", "scrollLeft", "scrollTop"], (function (t, e) {
            n.prototype[e] = function () {
                var t = Array.prototype.slice.call(arguments);
                return this.$element[e].apply(this.$element, t)
            }
        })), t.each(["extend", "inArray", "isEmptyObject"], (function (e, a) {
            n[a] = t[a]
        })), e.adapters.push({
            name: "jquery",
            Adapter: n
        }), e.Adapter = n
    }(),
    function () {
        "use strict";
        var t = window.Waypoint;

        function e(e) {
            return function () {
                var n = [],
                    a = arguments[0];
                return e.isFunction(arguments[0]) && ((a = e.extend({}, arguments[1])).handler = arguments[0]), this.each((function () {
                    var i = e.extend({}, a, {
                        element: this
                    });
                    "string" == typeof i.context && (i.context = e(this).closest(i.context)[0]), n.push(new t(i))
                })), n
            }
        }
        window.jQuery && (window.jQuery.fn.waypoint = e(window.jQuery)), window.Zepto && (window.Zepto.fn.waypoint = e(window.Zepto))
    }();
const events = ["scroll", "mousemove", "keypress", "touchstart", "touchmove"];
class ContentLazyLoader {
    constructor() {
        this.sliderInitialized = !1
    }
    getContainer = t => document.querySelector(`[data-lazy-type="${t}"]`);
    renderTopBar(t) {
        t.metro && this.renderMetroTopBar(t.metro), t.city && this.renderCityTopBar(t.city), t.districts && this.renderDistrictsTopBar(t)
    }
    renderDistrictsTopBar(t) {
        const e = this.getContainer("districts-bar");
        if (!e) return;
        let n = "";
        Object.values(t.districts).forEach((t => {
            n += this.renderCityBlock(t)
        })), t.all_cities && (n += this.renderAllCitiesBlock(t.all_cities)), e.innerHTML = n
    }
    renderCityBlock(t) {
        const {
            city_data: e,
            districts: n
        } = t;
        return `\n        <div class="geolocation-box__address ${e.active?"active":""}" id="geolocation-${e.id}">\n            <button type="button" class="geolocation-box__subtitle">\n                ${e.name}\n            </button>\n            <ul>\n                ${this.renderAllDistrictsLink(e)}\n                ${this.renderDistrictsList(n)}\n            </ul>\n        </div>\n    `
    }
    renderAllDistrictsLink(t) {
        return `\n        <li class="${t.active?"active":""}">\n            <a href="${t.link}" class="js-set-location js-is-city" data-id="${t.id}">\n                Все районы\n            </a>\n        </li>\n    `
    }
    renderDistrictsList(t) {
        return t && 0 !== t.length ? t.map((t => `\n            <li class="${t.active?"active":""}">\n                <a href="${t.link}" class="js-set-location" data-id="${t.id}">\n                    ${t.name}\n                </a>\n            </li>\n        `)).join("") : ""
    }
    renderAllCitiesBlock(t) {
        return `\n        <div class="geolocation-box__address" id="geolocation-all">\n            <button type="button" class="geolocation-box__subtitle">\n                Все города\n            </button>\n            <ul>\n                ${Object.values(t).map((t=>this.renderCityLink(t))).join("")}\n            </ul>\n        </div>\n    `
    }
    renderCityLink(t) {
        return `\n        <li>\n            <a href="${t.link}" class="js-set-location js-is-city" data-id="${t.id}">\n                ${t.name}\n            </a>\n        </li>\n    `
    }
    renderCityTopBar(t) {
        const e = this.getContainer("city-bar");
        e && (e.innerHTML = `\n    <ul>\n    ${t.map((t=>t&&t.id&&t.name?`\n        <li class="${t.active?"active":""}">\n            <button type="button" data-target="#geolocation-${t.id}" data-id="${t.id}">\n                ${t.name}\n            </button>\n        </li>`:(console.error("Invalid city object:",t),""))).join("")}\n        <li>\n            <button type="button" data-target="#geolocation-all" data-id="all">\n                Все города\n            </button>\n        </li>\n    </ul>`)
    }
    renderMetroTopBar(t) {
        const e = this.getContainer("metro-bar");
        if (!e) return;
        const n = this._createMetroCityButtons(t),
            a = this._createMetroCityStationLists(t);
        e.innerHTML = `\n\t\t<div class="metro-box__city">\n\t\t\t<ul>\n\t\t\t\t${n}\n\t\t\t</ul>\n\t\t</div>\n\t\t<div class="metro-box__subnav">\n\t\t\t${a}\n\t\t</div>`
    }
    _createMetroCityButtons(t) {
        return Object.values(t).map((t => `\n\t\t\t<li data-city-slug="${t.city.slug}">\n\t\t\t\t<button type="button">${t.city.name}</button>\n\t\t\t</li>`)).join("")
    }
    _createMetroCityStationLists(t) {
        return Object.values(t).map((t => `\n\t\t\t<div class="metro-list-container" data-list="${t.city.slug}" data-list-container>\n\t\t\t\t<ul>\n\t\t\t\t\t<div class="metro-station__search">\n\t\t\t\t\t\t<input type="search" data-metro-search aria-label="Поиск" placeholder="Поиск">\n\t\t\t\t\t</div>\n\t\t\t\t\t${this._buildMetroStationList(t.station)}\n\t\t\t\t</ul>\n\t\t\t</div>`)).join("")
    }
    _buildMetroStationList(t) {
        return t.map((t => `\n\t\t\t<li>\n\t\t\t\t<a href="${t.link}">${t.name}</a>\n\t\t\t</li>`)).join("")
    }
    renderFeaturesPart(t) {
        this.renderGroupSection("features", t)
    }
    renderArrivalPart(t) {
        this.renderCheckboxSection("arrival", t)
    }
    renderBodyPart(t) {
        this.renderGroupSection("body", t)
    }
    renderDistrictsPart(t) {
        this.renderCheckboxSection("districts", t, {
            "extra-list-class": "catalog-filter__ul",
            "render-with-link": !0
        })
    }
    renderMetroPart(t) {
        this.renderCheckboxSection("metro", t, {
            "extra-list-class": "catalog-filter__metro catalog-filter__ul",
            "render-with-link": !0
        })
    }
    renderHighwaysPart(t) {
        this.renderCheckboxSection("highways", t, {
            "extra-list-class": "catalog-filter__highway catalog-filter__ul",
            "render-with-link": !0
        })
    }
    renderParamsPart(t) {
        const e = this.getContainer("params");
        Object.entries(t).forEach((([t, n]) => {
            const a = `render${this.capitalize(t)}`;
            "function" == typeof this[a] && (e.innerHTML += this[a](n, {
                "extra-row-class": "catalog-filter__row--express"
            }))
        })), $('[data-sliderui="range"]', $("#filter")).length && !this.sliderInitialized && (initSlider(), this.sliderInitialized = !0)
    }
    renderGroupSection(t, e) {
        const n = this.getContainer(t);
        n && (this.fillCountOfActive(n, this.getChildrenObject(e)), n.innerHTML = this.renderGroups(e))
    }
    renderCheckboxSection(t, e, n = {}) {
        const a = this.getContainer(t);
        a && (this.fillCountOfActive(a, Object.assign({}, e)), a.innerHTML = this.renderCheckboxes(e, n))
    }
    renderGroups(t) {
        return Object.values(t).map((t => {
            const {
                parent: e,
                children: n = []
            } = t, a = e ? .name || "";
            return `\n\t\t\t\t<div class="catalog-filter__row">\n\t\t\t\t\t${a?`\n\t\t\t\t<div class="catalog-filter__subtitle">\n\t\t\t\t\t<span>${a}</span>\n\t\t\t\t\t<button type="button" class="catalog-filter__reset-group js-filter-reset-group">Сбросить</button>\n\t\t\t\t</div>`:""}\n\t\t\t\t\t<ul>${n.map((t=>this.renderCheckboxItem({name:t.name,sCode:t.sCode+"[]",value:t.value,active:t.active}))).join("")}</ul>\n\t\t\t\t</div>`
        })).join("")
    }
    renderCheckboxes(t, e = {}) {
        const {
            "extra-row-class": n = "",
            "extra-list-class": a = "",
            "render-with-link": i = !1
        } = e;
        return `\n\t\t\t<div class="catalog-filter__row ${n}">\n\t\t\t\t<ul class="${a}">\n\t\t\t\t\t${Object.values(t).map((t=>{const e=i?`<a href="${t.link}" class="catalog-filter__anchor_link" style="text-decoration: none; color: inherit;">${t.name}</a>`:t.name;return this.renderCheckboxItem({name:e,sCode:t.sCode,value:t.value||1,active:t.active})})).join("")}\n\t\t\t\t</ul>\n\t\t\t</div>`
    }
    renderCheckboxItem({
        name: t,
        sCode: e,
        value: n,
        active: a
    }) {
        return `\n\t\t\t<li>\n\t\t\t\t<label class="checkbox-style">\n\t\t\t\t\t<input type="checkbox" name="${e}" value="${n}" ${a?"checked":""}>\n\t\t\t\t\t<span>${t}</span>\n\t\t\t\t</label>\n\t\t\t</li>`
    }
    renderSlider(t) {
        return `\n\t\t\t<div class="catalog-filter__row">\n\t\t\t\t${Object.values(t).map((t=>{const e=t.value_min>0?t.value_min:t.default_min,n=t.value_max>0?t.value_max:t.default_max;return`\n\t\t\t\t\t\t<div class="catalog-filter-slide" data-sliderui="slider">\n\t\t\t\t\t\t\t<div class="catalog-filter-slide__header">\n\t\t\t\t\t\t\t\t${t.name}:\n\t\t\t\t\t\t\t\t<span data-sliderui="from-text">${e}</span> –\n\t\t\t\t\t\t\t\t<span data-sliderui="to-text">${n}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="catalog-filter-slide__wrapper">\n\t\t\t\t\t\t\t\t<div class="catalog-filter-slide__slider"\n\t\t\t\t\t\t\t\t     data-sliderui="range"\n\t\t\t\t\t\t\t\t     data-min="${t.default_min}"\n\t\t\t\t\t\t\t\t     data-max="${t.default_max}"\n\t\t\t\t\t\t\t\t     data-start="${e}"\n\t\t\t\t\t\t\t\t     data-end="${n}">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<input type="hidden" data-sliderui="from" name="${t.sCode}[]" value="${e}">\n\t\t\t\t\t\t\t<input type="hidden" data-sliderui="to" name="${t.sCode}[]" value="${n}">\n\t\t\t\t\t\t</div>`})).join("")}\n\t\t\t</div>`
    }
    fillCountOfActive(t, e) {
        const n = t.closest(".catalog-filter__cell") ? .querySelector(".lazy_count");
        if (!n) return;
        const a = this.findActiveItems(e);
        n.textContent = a > 0 ? a : n.dataset.default
    }
    findActiveItems(t) {
        let e = 0;
        const n = t => {
            Object.values(t).forEach((t => {
                t && "object" == typeof t && (t.active && e++, n(t))
            }))
        };
        return n(t), e
    }
    getChildrenObject(t) {
        return Object.fromEntries(Object.entries(t).map((([t, e]) => [t, e.children || []])))
    }
    capitalize(t) {
        return t.charAt(0).toUpperCase() + t.slice(1)
    }
    sprintf(t, ...e) {
        return t.replace(/{(\d+)}/g, ((t, n) => void 0 !== e[n - 1] ? e[n - 1] : t))
    }
}

function lazyLoad() {
    $(".lazy_container").each(((t, e) => {
        const n = $(e),
            {
                lazyLoader: a = "",
                lazyType: i = "",
                lazyData: o = "",
                lazyCallback: s = "",
                lazyPostCallback: r = ""
            } = n.data(),
            l = `${a}::onLazyLoad`;
        $.request(l, {
            data: {
                data: o
            },
            success: t => {
                s ? runCallback(s, [{
                    data: t.data,
                    type: i,
                    postCallback: r
                }]) : n.html(t.data)
            }
        })
    })), events.forEach((t => window.removeEventListener(t, lazyLoad)))
}

function lazyLoadImg() {
    document.querySelectorAll(".images_container").forEach((function (t) {
        t.querySelectorAll(".js-lazy-image").forEach((function (e) {
            const n = e.getAttribute("data-src"),
                a = e.getAttribute("data-alt") || "",
                i = document.createElement("img");
            i.src = n, i.alt = a, i.width = 140, i.height = 210, i.loading = "lazy", i.style.flexShrink = "0", t.appendChild(i), e.remove()
        }))
    }))
}

function addGeoCityHandler() {
    window.matchMedia("(min-width : 681px)");
    const t = window.matchMedia("(min-width : 1081px)");
    document.addEventListener("click", (e => {
        let n = $(e.target);
        if (n.closest(".geolocation-box__city")) {
            const e = n.closest("li"),
                a = n.data("target");
            if (!0 === t.matches) {
                if (!e.hasClass("active")) {
                    $(".geolocation-box__city li").removeClass("active");
                    let t = document.querySelector(".geolocation-box__address.active");
                    t && t.classList.remove("active"), n.closest("li").addClass("active"), $(a).addClass("active")
                }
            } else n.closest(".geolocation-box__city").addClass("is-mobile-hidden"), $(a).addClass("is-mobile-active")
        }
        n.hasClass("geolocation-box__subtitle") && ($(".geolocation-box__city").removeClass("is-mobile-hidden"), $(".geolocation-box__address").removeClass("is-mobile-active"))
    }))
}

function initLazyLoader() {
    events.forEach((function (t) {
        window.addEventListener(t, lazyLoad), window.addEventListener(t, lazyLoadImg)
    }))
}

function runCallback(t, arguments) {
    var e = window[t];
    "function" == typeof e && e.apply(window, arguments)
}

function metroStationsHandler() {
    let t = document.querySelector(".metro-box__trigger"),
        e = document.querySelector(".header-topbar-metro__dropdown"),
        n = document.querySelector(".metro-box"),
        a = document.querySelectorAll(".metro-box ul li[data-city-slug]");
    t.addEventListener("click", (n => {
        t.classList.toggle("is-active"), e.classList.toggle("is-active")
    })), document.addEventListener("click", (i => {
        let o = i.target;
        if (o.closest(".metro-box__city")) {
            n = document.querySelector(".metro-box"), a = document.querySelectorAll(".metro-box ul li[data-city-slug]"), a.forEach((t => {
                t.classList.remove("active")
            }));
            let t = o.closest("li");
            n.querySelectorAll("div[data-list]").forEach((e => {
                e.querySelector("input[data-metro-search]").value = "", e.querySelectorAll("ul li").forEach((t => t.style.display = "block")), e.dataset.list === t.dataset.citySlug ? (e.style.display = "block", t.classList.toggle("active")) : e.style.display = "none"
            }))
        }
        o.closest(".header-topbar__metro") || (t.classList.remove("is-active"), e.classList.remove("is-active"))
    })), document.getElementById("offcavas-metro-trigger").addEventListener("click", (() => {
        const t = n.querySelectorAll("div.metro-box__city ul li"),
            e = document.createElement("div");
        e.classList.add("metro-box__city"), t.forEach((t => {
            let a = t.dataset.citySlug,
                i = document.createElement("ul"),
                o = document.createElement("button"),
                s = n.querySelector(`div[data-list=${a}] ul`);
            o.classList.add("arrow-right"), o.setAttribute("data-city", a), o.innerHTML = t.textContent, i.innerHTML = o.outerHTML, s.setAttribute("data-metro-list", a), s.classList.add("hidden-metro-list"), i.innerHTML += s.outerHTML, e.appendChild(i)
        })), modal = `\n\t\t\t<div class="mfp-bg modal-animation mfp-ready" data-modal-metro></div>\n\t\t\t\t<div class="mfp-wrap mfp-align-top mfp-auto-cursor modal-animation mfp-ready" data-modal-metro tabindex="-1" style="overflow: hidden auto;">\n      \t\t\t<div class="mfp-container mfp-s-ready mfp-inline-holder">\n     \t\t\t\t\t <div class="mfp-content">\n\t\t\t\t\t\t\t\t<button type="button" data-close class="mfp-close"><i class="icon-close-blue" aria-hidden="true"></i></button>\n\t\t\t\t\t\t\t\t<div class="metro-box offcavas-metro-box" id="metro-box" style="color:black">\n\n\t\t\t\t\t\t\t\t ${e.outerHTML}\n\n\t\t\t\t\t\t\t\t</div>\n     \t\t\t\t\t </div>\n   \t\t\t</div>\n\t\t\t</div>\n\t\t`;
        const a = document.querySelector("body.is-offcanvas"),
            i = document.createElement("div");
        i.setAttribute("id", "offcavas-metro"), i.innerHTML = modal, a.appendChild(i);
        const o = document.getElementById("offcavas-metro"),
            s = o.querySelectorAll("div.metro-box__city ul button");
        s.forEach((t => {
            t.addEventListener("click", (() => {
                s.forEach((t => {
                    t.classList.remove("arrow-down")
                })), o.querySelectorAll("div.metro-box__city ul ul[data-metro-list]").forEach((e => {
                    e.querySelector("input[data-metro-search]").value = "", e.querySelectorAll("ul li").forEach((t => t.style.display = "block")), e.querySelector("ul div input[data-metro-search]").addEventListener("input", (t => {
                        e.querySelectorAll("ul li").forEach((e => {
                            e.querySelector("a").textContent.toLowerCase().indexOf(t.target.value.toLowerCase()) < 0 ? e.style.display = "none" : e.style.display = "block"
                        }))
                    })), e.dataset.metroList === t.dataset.city ? (e.classList.toggle("show-metro-list"), e.classList.contains("show-metro-list") && t.classList.add("arrow-down")) : e.classList.remove("show-metro-list")
                }))
            }))
        })), o.addEventListener("click", (t => {
            t.target.closest(".offcavas-metro-box") ? t.target.closest("button[data-close]") && o.remove() : o.remove()
        }))
    })), n.querySelectorAll("div[data-list-container]").forEach((t => {
        t.querySelector("ul div input[data-metro-search]").addEventListener("input", (e => {
            t.querySelectorAll("ul li").forEach((t => {
                t.querySelector("a").textContent.toLowerCase().indexOf(e.target.value.toLowerCase()) < 0 ? t.style.display = "none" : t.style.display = "block"
            }))
        }))
    }))
}

function initHandlers() {
    addGeoCityHandler(), metroStationsHandler(), initLocation()
}
window.renderLocationParts = ({
    data: t
}) => {
    (new ContentLazyLoader).renderTopBar(t)
}, window.renderFilterParts = ({
    data: t,
    postCallback: e
}) => {
    const n = new ContentLazyLoader;
    Object.entries(t).forEach((([t, a]) => {
        const i = n.sprintf(e, n.capitalize(t));
        "function" == typeof n[i] && n[i](a)
    }))
};