function geolocationRemover(e, t) {
    e.removeClass("is-active"), t.removeClass("is-active")
}

function geolocationOpen(e, t) {
    document.querySelector(".metro-box__trigger").classList.remove("is-active"), document.querySelector(".header-topbar-metro__dropdown").classList.remove("is-active"), e.addClass("is-active"), t.addClass("is-active"), $(document).on("click", (function (i) {
        t.is(i.target) || 0 !== t.has(i.target).length || geolocationRemover(e, t)
    }))
}

function panelRemover(e, t) {
    e.removeClass("is-active"), t.removeClass("is-active")
}

function panelOpen(e, t) {
    e.addClass("is-active"), t.addClass("is-active")
}

function initLocation() {
    document.addEventListener("click", (e => {
        let t = e.target;
        if (t.classList.contains("js-set-location")) {
            e.preventDefault();
            var i = $(t),
                o = {};
            return o[i.hasClass("js-is-city") ? "city" : "district"] = i.data("id"), i.href && "#" !== i.href.value && (o.redirect = i.prop("href")), $.request("Location::onUpdate", {
                loading: $.oc.stripeLoadIndicator,
                data: o,
                success: function (e) {
                    if (!e.status) return $.oc.flashMsg({
                        text: e.message || "Ошибка при обработке запроса!",
                        class: "error",
                        interval: 7
                    });
                    i.prop("href") ? window.location.href = i.prop("href") : e.data.redirect ? window.location.href = e.data.redirect : window.location.reload()
                }
            }), !1
        }
    }))
}

function initInfoModal(e) {
    if (void 0 === Cookies.get(e)) {
        var t = $("#" + e);
        if (t.length) {
            var i = function () {
                if ($.magnificPopup.instance.isOpen) return setTimeout((function () {
                    i()
                }), 15e3);
                $.magnificPopup.open({
                    items: {
                        src: "#" + e,
                        type: "inline"
                    },
                    midClick: !0,
                    removalDelay: 300,
                    mainClass: "modal-animation",
                    showCloseBtn: !1,
                    tClose: "Закрыть (Esc)",
                    tLoading: "Загрузка...",
                    callbacks: {
                        beforeOpen: function () {
                            $("body").addClass("modalInfo")
                        },
                        open: function () {},
                        beforeClose: function () {},
                        close: function () {
                            $("body").removeClass("modalInfo")
                        }
                    }
                }, 0)
            };
            setTimeout((function () {
                i()
            }), t.data("delay") || 3e4), $(".modal-info__later", t).on("click", (function () {
                Cookies.set(e, !0, {
                    expires: $(this).data("expires") || 7
                })
            })), $(".modal-info__down-show", t).on("click", (function (t) {
                Cookies.set(e, !0, {
                    expires: $(this).data("expires") || 30
                })
            }))
        }
    }
}

function initAgeModal(e) {
    let t = $("#" + e);
    void 0 !== Cookies.get(e) && "false" !== Cookies.get(e) || t.length && ($.magnificPopup.open({
        items: {
            src: "#" + e,
            type: "inline"
        },
        midClick: !0,
        showCloseBtn: !1,
        closeOnBgClick: !1,
        callbacks: {
            beforeOpen: function () {
                $("body").addClass("modalAge")
            },
            close: function () {
                $("body").removeClass("modalAge")
            }
        }
    }, 0), $(".modal-age__next", t).on("click", (function () {
        Cookies.set(e, !0, {
            expires: $(this).data("expires") || 365
        })
    })), $(".modal-age__false", t).on("click", (function (t) {
        Cookies.set(e, !1, {
            expires: $(this).data("expires") || 365
        })
    })))
}

function initCityModal(e) {
    const t = $("#" + e);
    void 0 !== Cookies.get(e) && "false" !== Cookies.get(e) || t.length && ($.magnificPopup.open({
        items: {
            src: "#" + e,
            type: "inline"
        },
        midClick: !0,
        showCloseBtn: !1,
        closeOnBgClick: !1,
        enableEscapeKey: !1,
        callbacks: {
            beforeOpen: function () {
                $("body").addClass("modalCity")
            },
            close: function () {
                $("body").removeClass("modalCity")
            }
        }
    }, 0), $(".mobile-select-js").on("change", (function () {
        let e = $(this).val();
        $(this).closest(".modal-city__main").find(".js-modal-city-set-cookies").data("id", e)
    })), t.on("click", ".js-modal-city-set-cookies", (function () {
        Cookies.set(e, !0, {
            expires: $(this).data("expires") || 365
        });
        var t = $(this),
            i = {};
        t.hasClass("city-from-domain") || ("#" !== t.data("url") && (i.redirect = t.data("url")), i.city = t.data("id"), $.request("Location::onUpdate", {
            loading: $.oc.stripeLoadIndicator,
            data: i,
            success: function (e) {
                if (!e.status) return $.oc.flashMsg({
                    text: e.message || "Ошибка при обработке запроса!",
                    class: "error",
                    interval: 7
                })
            }
        }))
    })))
}

function initModalSession(e) {
    let t = $("#" + e);
    void 0 !== sessionStorage.getItem(e) && "true" === sessionStorage.getItem(e) || t.length && ($.magnificPopup.open({
        items: {
            src: "#" + e,
            type: "inline"
        },
        midClick: !0,
        showCloseBtn: !1,
        closeOnBgClick: !1,
        enableEscapeKey: !1,
        callbacks: {
            beforeOpen: function () {
                $("body").addClass("modalAge")
            },
            close: function () {
                $("body").removeClass("modalAge")
            }
        }
    }, 0), $(".modal-age__next", t).on("click", (function (t) {
        $("#modal-ashoo").find(".age-checker__box:not(:checked)").length > 0 ? t.preventDefault() : ($.magnificPopup.close(), sessionStorage.setItem(e, "true"))
    })))
}

function initMap() {
    var e = $("#map");
    e.data("filter") && e.sexmap(e.data())
}

function iOS() {
    return ["iPad Simulator", "iPhone Simulator", "iPod Simulator", "iPad", "iPhone", "iPod"].includes(navigator.platform) || navigator.userAgent.includes("Mac") && "ontouchend" in document
}

function iosFix() {
    var e = $(window).height();
    $("html").css("--app-height", e + "px")
}

function iosHeight() {
    if (iOS()) {
        var e = $(".chat-section__main").outerHeight();
        $(".chat-section__list").css("height", e + "px")
    }
}

function scrollToBottom() {
    var e = $("#chatBox");
    e.length > 0 && e.scrollTop(e[0].scrollHeight)
}

function copyText() {
    var e = document.querySelector(".js-copybtn");
    e.addEventListener("click", (function (t) {
        t.preventDefault();
        var i = document.querySelector("." + e.dataset.copy);
        i.focus(), i.select(), document.execCommand("copy") && $.oc.flashMsg({
            text: "Скопировано",
            class: "success",
            interval: 5
        })
    }))
}
window.onerror = function (e, t, i, o, n) {
        Sentry.captureException(n || new Error(e))
    },
    function (e) {
        e((function () {
            const t = e(".geolocation-box__trigger"),
                i = e(".header-topbar__dropdown"),
                o = e('[data-offcanvas="wrapper"]'),
                n = e('[data-offcanvas="close"]'),
                a = e('[data-offcanvas="trigger"]');
            let s;
            const c = window.matchMedia("(min-width : 681px)"),
                l = window.matchMedia("(min-width : 1081px)");

            function r() {
                e(".geolocation-box__city").removeClass("is-mobile-hidden"), e(".geolocation-box__address").removeClass("is-mobile-active")
            }
            t.on("click", (function (o) {
                return o.preventDefault(), e(this).hasClass("is-active") ? (geolocationRemover(t, i), !1) : (panelRemover(d, u), geolocationOpen(t, i), !1)
            })), e(".geolocation-box__subtitle").on("click", (function () {
                return r(), !1
            }));
            var d = e('[data-lang="trigger"]'),
                u = e('[data-lang="wrapper"]');
            d.on("click", (function (o) {
                return o.preventDefault(), e(this).hasClass("is-active") ? (panelRemover(d, u), !1) : (geolocationRemover(t, i), panelOpen(d, u), !1)
            }));
            var p = e('[data-profile-menu="trigger"]'),
                m = e('[data-profile-menu="wrapper"]');
            p.on("click", (function (o) {
                return o.preventDefault(), e(this).hasClass("is-active") ? (panelRemover(p, m), !1) : (geolocationRemover(t, i), panelRemover(d, u), panelOpen(p, m), !1)
            })), a.on("click", (function () {
                return void 0 !== s && clearTimeout(s), e("body").addClass("is-offcanvas"), o.addClass("is-active"), s = setTimeout((function () {
                    o.addClass("is-anim")
                }), 10), !1
            })), n.on("click", (function () {
                return void 0 !== s && clearTimeout(s), o.removeClass("is-anim"), s = setTimeout((function () {
                    e("body").removeClass("is-offcanvas"), o.removeClass("is-active")
                }), 300), !1
            }));
            const f = e(".search-panel__button"),
                h = e(".search-panel__panel"),
                g = e(".search-panel__inner"),
                v = e(".search-panel__input"),
                C = e(".search-panel__close"),
                b = function () {
                    !0 === l.matches ? (f.off(), g.removeAttr("style")) : (f.on("click", (function () {
                        return h.addClass("is-active"), g.stop().animate({
                            width: "toggle"
                        }, 300), v.focus(), !1
                    })), C.on("click", (function () {
                        return g.stop().animate({
                            width: "toggle"
                        }, 300, (function () {
                            h.removeClass("is-active"), v.blur()
                        })), !1
                    })))
                };
            let w;
            l.addListener(b), b(), e(document).on("click", "[data-close-modal]", (function () {
                e.magnificPopup.close()
            })), e('[data-lightbox="mobile"]').on("click", (function () {
                const t = e(this).data("target"),
                    i = t.replace("#", "");
                return e(this).magnificPopup({
                    items: {
                        src: t,
                        type: "inline"
                    },
                    midClick: !0,
                    removalDelay: 300,
                    mainClass: "modal-animation",
                    showCloseBtn: !1,
                    fixedContentPos: !0,
                    alignTop: !0,
                    callbacks: {
                        beforeOpen: function () {
                            e("body").addClass(i)
                        },
                        open: function () {
                            w = !0, e(".mfp-content").prepend('<button type="button" class="mfp-close"><i class="icon-close-blue" aria-hidden="true"></i></button>')
                        },
                        beforeClose: function () {
                            e(".mfp-close").remove()
                        },
                        close: function () {
                            r(), e("body").removeClass(i), w = !1
                        }
                    }
                }).magnificPopup("open"), !1
            }));
            const y = function () {
                !0 === l.matches && !0 === w && e.magnificPopup.close()
            };
            l.addListener(y), y(), e(document).on("click", '[data-lightbox="inline"]', (function () {
                const t = e(this),
                    i = void 0 !== t.data("target") ? t.data("target") : t.attr("href"),
                    o = i.replace("#", "");
                return e(this).magnificPopup({
                    items: {
                        src: i,
                        type: "inline"
                    },
                    midClick: !0,
                    removalDelay: 300,
                    mainClass: "modal-animation",
                    showCloseBtn: !1,
                    tClose: "Закрыть (Esc)",
                    tLoading: "Загрузка...",
                    callbacks: {
                        beforeOpen: function () {
                            e("body").addClass(o)
                        },
                        open: function () {
                            e(".mfp-content").prepend('<button title="Закрыть (Esc)" type="button" class="mfp-close"><i class="icon-close-blue" aria-hidden="true"></i></button>')
                        },
                        beforeClose: function () {
                            e(".mfp-close").remove()
                        },
                        close: function () {
                            e("body").removeClass(o)
                        }
                    }
                }).magnificPopup("open"), !1
            })), e('[data-lightbox="ajax"]').magnificPopup({
                type: "ajax",
                midClick: !0,
                removalDelay: 300,
                mainClass: "modal-animation",
                showCloseBtn: !1,
                preloader: !1,
                tClose: "Закрыть (Esc)",
                tLoading: "Загрузка...",
                callbacks: {
                    open: function () {
                        e(".mfp-content").prepend('<button title="Закрыть (Esc)" type="button" class="mfp-close"><i class="icon-close-blue" aria-hidden="true"></i></button>')
                    },
                    beforeClose: function () {
                        e(".mfp-close").remove()
                    }
                }
            }), e('[data-lightbox="iframe"]').magnificPopup({
                type: "iframe",
                midClick: !0,
                removalDelay: 300,
                mainClass: "modal-animation",
                showCloseBtn: !1,
                preloader: !1,
                tClose: "Закрыть (Esc)",
                tLoading: "Загрузка...",
                callbacks: {
                    open: function () {
                        e(".mfp-content").prepend('<button title="Закрыть (Esc)" type="button" class="mfp-close"><i class="icon-close-blue" aria-hidden="true"></i></button>')
                    },
                    beforeClose: function () {
                        e(".mfp-close").remove()
                    }
                }
            }), e('[data-lightbox="image"]').magnificPopup({
                type: "image",
                closeOnContentClick: !1,
                closeBtnInside: !1,
                midClick: !0,
                showCloseBtn: !1,
                removalDelay: 300,
                mainClass: "modal-animation",
                tClose: "Закрыть (Esc)",
                tLoading: "Загрузка...",
                image: {
                    verticalFit: !0,
                    tError: '<a href="%url%">Изображение</a> не может быть загружено.'
                },
                gallery: {
                    enabled: !1
                },
                callbacks: {
                    open: function () {
                        e(".mfp-content").prepend('<button title="Закрыть (Esc)" type="button" class="mfp-close"><i class="icon-close-blue" aria-hidden="true"></i></button>')
                    },
                    beforeClose: function () {
                        e(".mfp-close").remove()
                    }
                }
            }), e('[data-lightbox="gallery"]').magnificPopup({
                delegate: "a",
                type: "image",
                closeOnContentClick: !1,
                closeBtnInside: !1,
                midClick: !0,
                showCloseBtn: !1,
                removalDelay: 300,
                mainClass: "modal-animation",
                tClose: "Закрыть (Esc)",
                tLoading: "Загрузка...",
                image: {
                    verticalFit: !0,
                    tError: '<a href="%url%">Изображение</a> не может быть загружено.'
                },
                gallery: {
                    tPrev: "Назад (Стрелка влево)",
                    tNext: "Вперед (Стрелка в право)",
                    tCounter: "%curr% из %total%",
                    enabled: !0
                },
                callbacks: {
                    open: function () {
                        e(".mfp-content").prepend('<button title="Закрыть (Esc)" type="button" class="mfp-close">×</button>')
                    },
                    beforeClose: function () {
                        e(".mfp-close").remove()
                    }
                }
            }), e(".modal-login").each((function () {
                const t = e(this).find(".modal-login__link"),
                    i = e(this).find(".modal-login__item");
                t.on("click", (function () {
                    const o = e(this).data("target");
                    return e(this).hasClass("active") || (i.removeClass("active"), t.removeClass("active"), e(this).addClass("active"), e(o).addClass("active")), !1
                }))
            })), e('[data-slider="panel-top"]').each((function () {
                const t = e(this).find(".swiper-container")[0];
                new Swiper(t, {
                    loop: 0,
                    grabCursor: 0,
                    slidesPerView: "auto",
                    spaceBetween: 0,
                    preloadImages: !1,
                    watchSlidesVisibility: !0,
                    watchOverflow: !0
                })
            })), e('[data-slider="item-list"]').each((function () {
                let t;
                const i = e(this).find(".swiper-container")[0],
                    o = function () {
                        if (!0 === c.matches) void 0 !== t && t.destroy(!0, !0);
                        else if (!1 === c.matches) return n()
                    };
                var n = function () {
                    t = new Swiper(i, {
                        loop: 0,
                        grabCursor: 0,
                        slidesPerView: "auto",
                        spaceBetween: 0,
                        watchSlidesVisibility: !0,
                        watchOverflow: !0
                    })
                };
                c.addListener(o), o()
            }));
            new Swiper(".girlfriends-js", {
                slidesPerView: 2,
                spaceBetween: 10,
                loop: !1
            });
            e(".item-content__more").on("click", (function () {
                return e(this).closest(".item-content").find(".item-content__text").addClass("is-active"), e(this).remove(), !1
            }));
            e(".js-select").select2({
                width: "resolve"
            });
            initLogin(), initProfileForm(), initAddForm(), initFavourites(), initProfileListActions(), initFilter(), initMegaFilter("#filter-full"), initAccordion(), initLocation(), initReviewForm(), initAbuseForm(), initPagerMore(), initPhoneButton(), initTelegramButton(), initWhatsAppButton(), initDonateButton(), initPrepayButton(), copyContent(), initStartChat(), initChat(), initPayment(), initMap(), initInfoModal("modal-info"), initInfoModal("modal-pay"), initAgeModal("modal-age"), initCityModal("modal-city"), initModalSession("modal-ashoo"), initScrollPagination(), initQuickSearch(), initDoctorSearchForm(), initButtonPagination(), initLazyLoader(), initHandlers(), window.addEventListener("resize", iosFix), iosFix(), iosHeight(), iOS() && e("body").addClass("is-ios"), "#login" === window.location.hash && e("#to-login").click(), e(".tprice").on("click", (function () {
                let t = e(this).parent().parent();
                e(t).find(".tprice").removeClass("active"), e(this).addClass("active");
                let i = e(this).attr("href");
                return e(t).find(".t__overflow").removeClass("active"), e(i).addClass("active"), !1
            }))
        })), e('[data-slider="inList"]').each((function () {
            let t = e(window).width(),
                i = [
                    [679, 4],
                    [779, 5],
                    [900, 6],
                    [1e3, 7],
                    [1200, 8]
                ],
                o = 1;
            for (const e of i)
                if (e[0] < t) {
                    o = e[1];
                    break
                } if (o < parseInt(e(this).data("len"))) {
                const t = e(this).find(".swiper-container")[0],
                    i = {
                        loop: !0,
                        grabCursor: 0,
                        slidesPerView: "auto",
                        spaceBetween: 0,
                        preloadImages: !1,
                        watchSlidesVisibility: !0,
                        watchOverflow: !0,
                        modules: [Swiper.prototype.modules.navigation],
                        navigation: {
                            nextEl: ".swiper-button-next",
                            prevEl: ".swiper-button-prev"
                        }
                    };
                new Swiper(t, i);
                e(this).find(".inList-navigation").css({
                    display: "block"
                })
            }
        })), new Swiper(".list-reviews_container", {
            loop: 0,
            grabCursor: 0,
            slidesPerView: 1,
            spaceBetween: 20,
            preloadImages: !1,
            watchSlidesVisibility: !0,
            watchOverflow: !0,
            breakpoints: {
                640: {
                    slidesPerView: 2
                }
            }
        }), setTimeout((() => {
            let e = document.querySelector(".list-reviews_container");
            e && e.querySelectorAll(".review_list--item-content").forEach((e => {
                if (e.scrollHeight > e.clientHeight) {
                    e.closest(".review_list--item").querySelector(".review_list--item-more").classList.remove("hidden")
                }
            }))
        }), 50)
    }(jQuery), $(".notifications-page__checked .checkbox-block input").on("change", (function () {
        var e = $(this).is(":checked") ? 1 : 0,
            t = $(this).attr("name"),
            i = $(this).closest(".notifications-page__table").data("user");
        $(this).request("Profile::onChangeNotifictions", {
            loading: $.oc.stripeLoadIndicator,
            data: {
                prop_val: e,
                prop_name: t,
                user_id: i
            }
        })
    }));
const article = document.querySelector("#electric-cars");
$(".age-checker__box").on("change", (() => {
    let e = $("#modal-ashoo");
    $(".age-checker__box:not(:checked)").length > 0 || e.find("button").each(((e, t) => {
        $(t).prop("disabled", !1)
    }))
})), $(document).ready((function () {
    function e() {
        $(window).scroll((() => {
            $(window).width() < 700 && $(window).scrollTop() > 100 ? ($(".header-topbar").css("position", "fixed"), $(".header-topbar").css("height", "52px"), $(".header-topbar.new_year").addClass("stucked")) : ($(".header-topbar").css("position", ""), $(".header-topbar").css("height", ""), $(".header-topbar").css("padding-top", ""), $(".header-topbar.new_year").removeClass("stucked"))
        })), $(window).width() < 700 && $(window).scrollTop() > 100 && ($(".header-topbar").css("position", "fixed"), $(".header-topbar").css("height", "52px"), $(".header-topbar.new_year").addClass("stucked"))
    }
    e(), $(window).on("resize", (() => {
        e()
    }))
})), $(document).ready((function () {
    let e = document.getElementById("preorder_toggle_btn");
    if (!e) return;
    let t = document.querySelectorAll(".preorder");
    t && e.addEventListener("click", (function (e) {
        e.preventDefault(), t.forEach((e => {
            e.classList.toggle("collapsed")
        }))
    }))
}));